(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{1905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(5155),s=r(2115),n=r(5695),l=r(68),i=r(6766),d=r(7650),o=r(9613);function c(e){let{children:t,componentId:r,isSelected:n,componentName:i}=e,{deleteComponent:c}=(0,l.U)(),x=(0,s.useRef)(null),[u,p]=(0,s.useState)({top:0,left:0,visible:!1,isScrolling:!1}),g=(0,s.useRef)(),[h]=(0,s.useState)(!0),m=(0,s.useCallback)(()=>{if(!n||!x.current)return void p(e=>({...e,visible:!1}));let e=x.current.getBoundingClientRect(),t=e.top-32-6,r=e.left,a=globalThis.innerHeight,s=globalThis.innerWidth;t<10&&(t=e.bottom+6),t+32>a-10&&(t=e.top+6),r+180>s-10&&(r=Math.max(10,s-180-10)),p(e=>({top:t,left:r,visible:!e.isScrolling,isScrolling:e.isScrolling}))},[n]),f=(0,s.useCallback)(()=>{p(e=>({...e,isScrolling:!0,visible:!1})),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{p(e=>({...e,isScrolling:!1})),m()},300)},[m]);return(0,s.useEffect)(()=>{n?m():p(e=>({...e,visible:!1}))},[n,m]),(0,s.useEffect)(()=>{var e,t;if(!n)return;let r=[window,document.querySelector(".overflow-y-auto"),document.querySelector(".overflow-auto"),null==(e=x.current)?void 0:e.closest(".overflow-y-auto"),null==(t=x.current)?void 0:t.closest(".overflow-auto")].filter(Boolean);return r.forEach(e=>{null==e||e.addEventListener("scroll",f,{passive:!0})}),globalThis.addEventListener("resize",m,{passive:!0}),()=>{r.forEach(e=>{null==e||e.removeEventListener("scroll",f)}),globalThis.removeEventListener("resize",m),g.current&&clearTimeout(g.current)}},[n,f,m]),(0,a.jsxs)("div",{ref:x,className:"relative group",children:[t,n&&!u.isScrolling&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"absolute inset-0 border border-blue-500 rounded-sm pointer-events-none z-10 shadow-sm",children:[(0,a.jsx)("div",{className:"absolute -top-0.5 -left-0.5 w-1.5 h-1.5 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"absolute -bottom-0.5 -left-0.5 w-1.5 h-1.5 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-1.5 h-1.5 bg-blue-500 rounded-full"})]})}),u.visible&&h?(0,d.createPortal)((0,a.jsx)("div",{className:"fixed flex items-center space-x-1 bg-blue-500 rounded-md px-2 py-1 shadow-lg pointer-events-auto transition-opacity duration-200",style:{top:"".concat(u.top,"px"),left:"".concat(u.left,"px"),zIndex:9999},children:(0,a.jsxs)(o.Kq,{children:[(0,a.jsx)("span",{className:"text-xs text-white font-medium mr-1",children:i||"组件"}),(0,a.jsxs)(o.bL,{children:[(0,a.jsx)(o.l9,{asChild:!0,children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"w-6 h-6 flex items-center justify-center text-white hover:bg-blue-600 rounded transition-colors","aria-label":"复制组件",children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})}),(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["复制组件",(0,a.jsx)(o.i3,{className:"fill-gray-900"})]})})]}),(0,a.jsxs)(o.bL,{children:[(0,a.jsx)(o.l9,{asChild:!0,children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"w-6 h-6 flex items-center justify-center text-white hover:bg-blue-600 rounded transition-colors","aria-label":"移动组件",children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})})}),(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["移动组件",(0,a.jsx)(o.i3,{className:"fill-gray-900"})]})})]}),(0,a.jsxs)(o.bL,{children:[(0,a.jsx)(o.l9,{asChild:!0,children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),c(r)},className:"w-6 h-6 flex items-center justify-center text-white hover:bg-red-500 rounded transition-colors","aria-label":"删除组件",children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["删除组件",(0,a.jsx)(o.i3,{className:"fill-gray-900"})]})})]})]})}),document.body):null]})}var x=r(5472);let u={text:{type:"text",name:"文本",icon:"\uD83D\uDD24",defaultProps:{text:"文本内容"},defaultStyle:{fontSize:"14",color:"#333333",paddingTop:"8",paddingRight:"8",paddingBottom:"8",paddingLeft:"8",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!1,description:"用于显示文本内容"},button:{type:"button",name:"按钮",icon:"\uD83D\uDD18",defaultProps:{text:"按钮"},defaultStyle:{backgroundColor:"#1890ff",color:"#ffffff",paddingTop:"8",paddingRight:"16",paddingBottom:"8",paddingLeft:"16",borderRadius:"4",border:"none",fontSize:"14",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!1,description:"可点击的按钮组件"},image:{type:"image",name:"图片",icon:"\uD83D\uDDBC️",defaultProps:{src:"https://img4.yishouapp.com/obs/public_prefix/2025/6/25/12cd92ea3ce549964a2f3d349f2b1651.png",alt:"图片"},defaultStyle:{width:"100%",height:"auto",borderRadius:"4",objectFit:"cover",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!1,description:"用于显示图片"},input:{type:"input",name:"输入框",icon:"\uD83D\uDCDD",defaultProps:{placeholder:"请输入内容",type:"text"},defaultStyle:{width:"100%",paddingTop:"8",paddingRight:"12",paddingBottom:"8",paddingLeft:"12",border:"1px solid #d9d9d9",borderRadius:"4",fontSize:"14",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!1,description:"用于用户输入"},container:{type:"container",name:"容器",icon:"\uD83D\uDCE6",defaultProps:{},defaultStyle:{paddingTop:"16",paddingRight:"16",paddingBottom:"16",paddingLeft:"16",backgroundColor:"#f5f5f5",borderRadius:"4",display:"flex",flexDirection:"column",gap:"8",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!0,description:"用于包含其他组件的容器"},list:{type:"list",name:"列表",icon:"\uD83D\uDCCB",defaultProps:{},defaultStyle:{display:"flex",flexDirection:"column",gap:"4",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!0,description:"用于显示列表内容"},card:{type:"card",name:"卡片",icon:"\uD83C\uDFB4",defaultProps:{},defaultStyle:{backgroundColor:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"8",paddingTop:"16",paddingRight:"16",paddingBottom:"16",paddingLeft:"16",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!0,description:"卡片容器组件"},divider:{type:"divider",name:"分割线",icon:"➖",defaultProps:{},defaultStyle:{width:"100%",height:"1",backgroundColor:"#e8e8e8",marginTop:"16",marginRight:"0",marginBottom:"16",marginLeft:"0"},canHaveChildren:!1,description:"用于分割内容的线条"},space:{type:"space",name:"间距",icon:"⬜",defaultProps:{},defaultStyle:{width:"100%",height:"16",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0"},canHaveChildren:!1,description:"用于增加组件间距"}},p=e=>u[e],g=()=>Object.keys(u).map(e=>u[e]);function h(e){let{component:t,isSelected:r,onSelect:s,mode:n="editor"}=e,{type:d,props:o,style:u,children:g}=t,{selectedComponentId:m,selectComponent:f}=(0,l.U)(),b=p(d),{isOver:v,setNodeRef:y}=(0,x.zM)({id:"component-".concat(t.id),disabled:!b.canHaveChildren||"editor"!==n,data:{type:"container",componentId:t.id}}),j=(e,t)=>t&&["width","height","minWidth","minHeight","maxWidth","maxHeight","margin","marginTop","marginRight","marginBottom","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","letterSpacing","borderWidth","borderRadius","top","right","bottom","left","gap"].includes(e)&&/^\d+(\.\d+)?$/.test(t)?"".concat(t,"px"):t,N=e=>{e.stopPropagation(),"editor"===n&&s()},w=()=>{if("editor"===n){let e={};u&&Object.entries(u).forEach(t=>{let[r,a]=t;a&&(e[r]=j(r,a))});let t={cursor:"pointer",transition:"all 0.2s",...e};switch(d){case"text":return(0,a.jsx)("span",{style:t,onClick:N,children:o.text||"文本内容"});case"button":return(0,a.jsx)("button",{style:{...t,paddingTop:(null==e?void 0:e.paddingTop)||(null==e?void 0:e.padding)||"0px",paddingRight:(null==e?void 0:e.paddingRight)||(null==e?void 0:e.padding)||"0px",paddingBottom:(null==e?void 0:e.paddingBottom)||(null==e?void 0:e.padding)||"0px",paddingLeft:(null==e?void 0:e.paddingLeft)||(null==e?void 0:e.padding)||"0px",borderRadius:(null==e?void 0:e.borderRadius)||"4px",border:(null==e?void 0:e.border)||"none",backgroundColor:(null==e?void 0:e.backgroundColor)||"#1890ff",color:(null==e?void 0:e.color)||"#ffffff",fontSize:(null==e?void 0:e.fontSize)||"14px"},disabled:o.disabled,onClick:N,children:o.text||"按钮"});case"image":return(0,a.jsx)(i.default,{style:{...t,display:"block",objectFit:"cover",width:(null==e?void 0:e.width)||"auto",height:(null==e?void 0:e.height)||"auto"},src:o.src||"https://via.placeholder.com/200x150?text=图片",alt:o.alt||"图片",width:200,height:150,onClick:N});case"input":return(0,a.jsx)("input",{style:{...t,paddingTop:(null==e?void 0:e.paddingTop)||(null==e?void 0:e.padding)||"8px",paddingRight:(null==e?void 0:e.paddingRight)||(null==e?void 0:e.padding)||"12px",paddingBottom:(null==e?void 0:e.paddingBottom)||(null==e?void 0:e.padding)||"8px",paddingLeft:(null==e?void 0:e.paddingLeft)||(null==e?void 0:e.padding)||"12px",border:(null==e?void 0:e.border)||"1px solid #d9d9d9",borderRadius:(null==e?void 0:e.borderRadius)||"4px",fontSize:(null==e?void 0:e.fontSize)||"14px",width:(null==e?void 0:e.width)||"100%"},type:o.type||"text",placeholder:o.placeholder||"请输入内容",onClick:N,onChange:()=>{}});case"container":return(0,a.jsx)("div",{ref:y,style:{...t,minHeight:"50px",paddingTop:(null==e?void 0:e.paddingTop)||(null==e?void 0:e.padding)||"16px",paddingRight:(null==e?void 0:e.paddingRight)||(null==e?void 0:e.padding)||"16px",paddingBottom:(null==e?void 0:e.paddingBottom)||(null==e?void 0:e.padding)||"16px",paddingLeft:(null==e?void 0:e.paddingLeft)||(null==e?void 0:e.padding)||"16px",backgroundColor:(null==e?void 0:e.backgroundColor)||"#f5f5f5",borderRadius:(null==e?void 0:e.borderRadius)||"4px",display:(null==e?void 0:e.display)||"flex",flexDirection:(null==e?void 0:e.flexDirection)||"column",gap:null==e?void 0:e.gap,...v&&{backgroundColor:"#e3f2fd",border:"2px dashed #2196f3"}},onClick:N,children:g&&g.length>0?g.map(e=>(0,a.jsx)(h,{component:e,isSelected:m===e.id,onSelect:()=>f(e.id),mode:n},e.id)):(0,a.jsx)("div",{style:{color:v?"#2196f3":"#9ca3af",fontSize:"14px",padding:"16px",textAlign:"center",border:v?"2px dashed #2196f3":"2px dashed #d1d5db",borderRadius:"4px",backgroundColor:v?"#e3f2fd":"transparent"},children:v?"松开鼠标放置组件":"拖拽组件到这里"})});case"list":return(0,a.jsx)("div",{ref:y,style:{...t,display:(null==e?void 0:e.display)||"flex",flexDirection:(null==e?void 0:e.flexDirection)||"column",gap:null==e?void 0:e.gap,...v&&{backgroundColor:"#e3f2fd",border:"2px dashed #2196f3",borderRadius:"4px",padding:"8px"}},onClick:N,children:g&&g.length>0?g.map(e=>(0,a.jsx)(h,{component:e,isSelected:m===e.id,onSelect:()=>f(e.id),mode:n},e.id)):(0,a.jsx)("div",{style:{color:v?"#2196f3":"#9ca3af",fontSize:"14px",padding:"16px",textAlign:"center",border:v?"2px dashed #2196f3":"2px dashed #d1d5db",borderRadius:"4px",backgroundColor:v?"#e3f2fd":"transparent"},children:v?"松开鼠标放置组件":"拖拽组件到这里"})});case"card":return(0,a.jsx)("div",{ref:y,style:{...t,backgroundColor:(null==e?void 0:e.backgroundColor)||"#ffffff",border:(null==e?void 0:e.border)||"1px solid #e8e8e8",borderRadius:(null==e?void 0:e.borderRadius)||"8px",paddingTop:(null==e?void 0:e.paddingTop)||(null==e?void 0:e.padding)||"16px",paddingRight:(null==e?void 0:e.paddingRight)||(null==e?void 0:e.padding)||"16px",paddingBottom:(null==e?void 0:e.paddingBottom)||(null==e?void 0:e.padding)||"16px",paddingLeft:(null==e?void 0:e.paddingLeft)||(null==e?void 0:e.padding)||"16px",boxShadow:(null==e?void 0:e.boxShadow)||"0 2px 8px rgba(0,0,0,0.1)",...v&&{backgroundColor:"#e3f2fd",border:"2px dashed #2196f3"}},onClick:N,children:g&&g.length>0?g.map(e=>(0,a.jsx)(h,{component:e,isSelected:m===e.id,onSelect:()=>f(e.id),mode:n},e.id)):(0,a.jsx)("div",{style:{color:v?"#2196f3":"#9ca3af",fontSize:"14px",padding:"16px",textAlign:"center",border:v?"2px dashed #2196f3":"2px dashed #d1d5db",borderRadius:"4px",backgroundColor:v?"#e3f2fd":"transparent"},children:v?"松开鼠标放置组件":"拖拽组件到这里"})});case"divider":return(0,a.jsx)("div",{style:{...t,width:(null==e?void 0:e.width)||"100%",height:(null==e?void 0:e.height)||"1px",backgroundColor:(null==e?void 0:e.backgroundColor)||"#e8e8e8",margin:(null==e?void 0:e.margin)||"16px 0"},onClick:N});case"space":return(0,a.jsx)("div",{style:{...t,width:(null==e?void 0:e.width)||"100%",height:(null==e?void 0:e.height)||"16px"},onClick:N});default:return(0,a.jsxs)("div",{style:t,onClick:N,children:["未知组件类型: ",d]})}}return(0,a.jsx)("div",{children:"预览模式待实现"})};return"editor"===n?(0,a.jsx)(c,{componentId:t.id,isSelected:r,componentName:t.name,children:w()}):w()}function m(){let{getRootComponents:e,selectedComponentId:t,selectComponent:r}=(0,l.U)(),n=e(),{isOver:i,setNodeRef:d}=(0,x.zM)({id:"canvas-drop-zone",data:{type:"canvas"}});return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&r(null)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,r]),(0,s.useEffect)(()=>{console.log("Canvas 组件数据:",{totalComponents:n.length,components:n.map(e=>{var t,r,a;return{id:e.id,type:e.type,name:e.name,hasChildren:!!(null==(t=e.children)?void 0:t.length),childrenCount:(null==(r=e.children)?void 0:r.length)||0,children:(null==(a=e.children)?void 0:a.map(e=>({id:e.id,type:e.type,name:e.name})))||[]}})})},[n]),(0,a.jsx)("div",{ref:d,onClick:e=>{e.target===e.currentTarget&&r(null)},onMouseDown:e=>{let t=e.clientX,a=e.clientY,s=e=>{let n=Math.abs(e.clientX-t),l=Math.abs(e.clientY-a);if(n<5&&l<5){let t=e.target;(t.classList.contains("min-h-full")||t.closest(".space-y-2"))&&r(null)}document.removeEventListener("mouseup",s)};document.addEventListener("mouseup",s)},className:"min-h-full w-full p-4 transition-colors ".concat(i?"bg-blue-50 border-2 border-dashed border-blue-300":""),children:0===n.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-400 text-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF1"}),(0,a.jsx)("p",{className:"text-sm",children:"从左侧拖拽或点击组件来添加到页面"}),(0,a.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"选中组件后按 ESC 键可取消选中"}),i&&(0,a.jsx)("p",{className:"text-xs mt-2 text-blue-600 font-medium",children:"松开鼠标放置组件"})]})}):(0,a.jsxs)("div",{children:[n.map(e=>(0,a.jsx)(h,{component:e,isSelected:t===e.id,onSelect:()=>r(e.id)},e.id)),t&&(0,a.jsx)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-3 py-1 rounded-full text-xs opacity-75 pointer-events-none z-50",children:"按 ESC 键取消选中"}),i&&(0,a.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-3 py-1 rounded-full text-xs pointer-events-none z-50",children:"松开鼠标添加组件到页面"})]})})}function f(e){let{config:t}=e,{addComponent:r}=(0,l.U)(),[n,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i(!0)},[]);let{attributes:d,listeners:c,setNodeRef:u,transform:p,isDragging:g}=(0,x.PM)({id:"material-".concat(t.type),data:{type:"material",config:t},disabled:!n}),h={transform:p?"translate3d(".concat(p.x,"px, ").concat(p.y,"px, 0)"):void 0,opacity:g?.5:1};return(0,a.jsxs)(o.bL,{children:[(0,a.jsx)(o.l9,{asChild:!0,children:(0,a.jsx)("button",{ref:u,style:h,...n?d:{},...n?c:{},onClick:()=>{r({id:"comp_".concat(Date.now()),type:t.type,name:t.name,props:t.defaultProps,style:t.defaultStyle})},className:"material-item w-full text-left cursor-grab active:cursor-grabbing","aria-label":"添加".concat(t.name,"组件"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:t.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.description})]}),t.canHaveChildren&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"容器"})]})})}),(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[t.canHaveChildren?"拖拽到画布或点击添加容器组件":"拖拽到画布或点击添加组件",(0,a.jsx)(o.i3,{className:"fill-gray-900"})]})})]})}function b(){let e=g();return(0,a.jsx)(o.Kq,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 px-2 py-1 bg-blue-50 rounded",children:"\uD83D\uDCA1 点击添加到页面，或拖拽到容器中"}),e.map(e=>(0,a.jsx)(f,{config:e},e.type))]})})}var v=r(64),y=r(4884),j=r(4582),N=r(968),w=r(6474),C=r(5196);function k(){var e,t,r,n,i,d,o,c,x,u,g,h,m,f,b,k,L,R,S,A;let{selectedComponentId:T,getComponentById:B,updateComponent:D}=(0,l.U)(),[z,E]=(0,s.useState)("props"),H=T?B(T):null;if(!H)return(0,a.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⚙️"}),(0,a.jsx)("p",{children:"选择一个组件来编辑属性"})]});let V=p(H.type),P=(e,t)=>{D(T,{props:{...H.props,[e]:t}})},M=(e,t)=>{D(T,{style:{...H.style,[e]:t}})};return(0,a.jsx)("div",{className:"h-full flex flex-col",children:(0,a.jsxs)("div",{className:"property-section",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl",children:V.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:V.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:H.id})]})]}),(0,a.jsxs)(v.bL,{value:z,onValueChange:e=>E(e),children:[(0,a.jsxs)(v.B8,{className:"flex border-b border-gray-200",children:[(0,a.jsx)(v.l9,{value:"props",className:"px-3 py-2 text-sm font-medium border-b-2 transition-colors data-[state=active]:border-blue-500 data-[state=active]:text-blue-600 data-[state=inactive]:border-transparent data-[state=inactive]:text-gray-500 hover:text-gray-700",children:"属性"}),(0,a.jsx)(v.l9,{value:"style",className:"px-3 py-2 text-sm font-medium border-b-2 transition-colors data-[state=active]:border-blue-500 data-[state=active]:text-blue-600 data-[state=inactive]:border-transparent data-[state=inactive]:text-gray-500 hover:text-gray-700",children:"样式"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsx)(v.UC,{value:"props",children:(0,a.jsxs)("div",{className:"property-section",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"组件属性"}),"text"===H.type&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"文本内容"}),(0,a.jsx)("input",{type:"text",value:H.props.text||"",onChange:e=>P("text",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"文本内容",placeholder:"请输入文本内容"})]})}),"button"===H.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"按钮文字"}),(0,a.jsx)("input",{type:"text",value:H.props.text||"",onChange:e=>P("text",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"按钮文字",placeholder:"请输入按钮文字"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.bL,{checked:H.props.disabled||!1,onCheckedChange:e=>P("disabled",e),className:"w-11 h-6 bg-gray-200 rounded-full relative data-[state=checked]:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:(0,a.jsx)(y.zi,{className:"block w-5 h-5 bg-white rounded-full transition-transform duration-100 translate-x-0.5 will-change-transform data-[state=checked]:translate-x-5"})}),(0,a.jsx)(N.b,{className:"text-xs font-medium text-gray-700",children:"禁用状态"})]})]}),"image"===H.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"图片地址"}),(0,a.jsx)("input",{type:"text",value:H.props.src||"",onChange:e=>P("src",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"图片地址",placeholder:"请输入图片URL"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"替代文本"}),(0,a.jsx)("input",{type:"text",value:H.props.alt||"",onChange:e=>P("alt",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"替代文本",placeholder:"请输入图片描述"})]})]}),"input"===H.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"占位符"}),(0,a.jsx)("input",{type:"text",value:H.props.placeholder||"",onChange:e=>P("placeholder",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"占位符",placeholder:"请输入占位符文本"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs font-medium text-gray-700 mb-1",children:"输入类型"}),(0,a.jsxs)(j.bL,{value:H.props.type||"text",onValueChange:e=>P("type",e),children:[(0,a.jsxs)(j.l9,{className:"w-full inline-flex items-center justify-between px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)(j.WT,{}),(0,a.jsx)(j.In,{children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(j.ZL,{children:(0,a.jsx)(j.UC,{className:"bg-white rounded-md shadow-lg border border-gray-200 z-50",children:(0,a.jsxs)(j.LM,{className:"p-1",children:[(0,a.jsxs)(j.q7,{value:"text",className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"文本"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(j.q7,{value:"password",className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"密码"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(j.q7,{value:"email",className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"邮箱"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(j.q7,{value:"number",className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"数字"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(j.q7,{value:"tel",className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"电话"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]})]})})})]})]})]})]})}),(0,a.jsx)(v.UC,{value:"style",children:(0,a.jsxs)("div",{className:"property-section",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"样式设置"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"尺寸"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"宽度"}),(0,a.jsx)("input",{type:"number",value:(null==(e=H.style)?void 0:e.width)||"",onChange:e=>M("width",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"auto",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"高度"}),(0,a.jsx)("input",{type:"number",value:(null==(t=H.style)?void 0:t.height)||"",onChange:e=>M("height",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"auto",min:"0"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-3",children:"间距"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"外边距"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬆"}),(0,a.jsx)("input",{type:"number",value:(null==(r=H.style)?void 0:r.marginTop)||"",onChange:e=>M("marginTop",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬇"}),(0,a.jsx)("input",{type:"number",value:(null==(n=H.style)?void 0:n.marginBottom)||"",onChange:e=>M("marginBottom",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬅"}),(0,a.jsx)("input",{type:"number",value:(null==(i=H.style)?void 0:i.marginLeft)||"",onChange:e=>M("marginLeft",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"➡"}),(0,a.jsx)("input",{type:"number",value:(null==(d=H.style)?void 0:d.marginRight)||"",onChange:e=>M("marginRight",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"内边距"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬆"}),(0,a.jsx)("input",{type:"number",value:(null==(o=H.style)?void 0:o.paddingTop)||"",onChange:e=>M("paddingTop",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬇"}),(0,a.jsx)("input",{type:"number",value:(null==(c=H.style)?void 0:c.paddingBottom)||"",onChange:e=>M("paddingBottom",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"⬅"}),(0,a.jsx)("input",{type:"number",value:(null==(x=H.style)?void 0:x.paddingLeft)||"",onChange:e=>M("paddingLeft",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 w-4",children:"➡"}),(0,a.jsx)("input",{type:"number",value:(null==(u=H.style)?void 0:u.paddingRight)||"",onChange:e=>M("paddingRight",e.target.value),className:"flex-1 px-2 py-1 text-xs text-center border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"颜色"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"文字颜色"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"color",value:(null==(g=H.style)?void 0:g.color)||"#000000",onChange:e=>M("color",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer","aria-label":"选择文字颜色",title:"选择文字颜色"}),(0,a.jsx)("input",{type:"text",value:(null==(h=H.style)?void 0:h.color)||"",onChange:e=>M("color",e.target.value),className:"flex-1 ml-2 px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"#000000"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"背景颜色"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"color",value:(null==(m=H.style)?void 0:m.backgroundColor)||"#ffffff",onChange:e=>M("backgroundColor",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer","aria-label":"选择背景颜色",title:"选择背景颜色"}),(0,a.jsx)("input",{type:"text",value:(null==(f=H.style)?void 0:f.backgroundColor)||"",onChange:e=>M("backgroundColor",e.target.value),className:"flex-1 ml-2 px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"#ffffff"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"字体"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"字体大小"}),(0,a.jsx)("input",{type:"number",value:(null==(b=H.style)?void 0:b.fontSize)||"",onChange:e=>M("fontSize",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"14",min:"1",max:"200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"字体粗细"}),(0,a.jsxs)(j.bL,{value:(null==(k=H.style)?void 0:k.fontWeight)||"normal",onValueChange:e=>M("fontWeight",e),children:[(0,a.jsxs)(j.l9,{className:"w-full inline-flex items-center justify-between px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)(j.WT,{}),(0,a.jsx)(j.In,{children:(0,a.jsx)(w.A,{className:"h-3 w-3"})})]}),(0,a.jsx)(j.ZL,{children:(0,a.jsx)(j.UC,{className:"bg-white rounded-md shadow-lg border border-gray-200 z-50",children:(0,a.jsxs)(j.LM,{className:"p-1",children:[(0,a.jsxs)(j.q7,{value:"normal",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"正常"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)(j.q7,{value:"bold",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"粗体"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)(j.q7,{value:"lighter",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"细体"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]})]})})})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"边框"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"宽度"}),(0,a.jsx)("input",{type:"number",value:(null==(L=H.style)?void 0:L.borderWidth)||"",onChange:e=>M("borderWidth",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",max:"50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"样式"}),(0,a.jsxs)(j.bL,{value:(null==(R=H.style)?void 0:R.borderStyle)||"solid",onValueChange:e=>M("borderStyle",e),children:[(0,a.jsxs)(j.l9,{className:"w-full inline-flex items-center justify-between px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)(j.WT,{}),(0,a.jsx)(j.In,{children:(0,a.jsx)(w.A,{className:"h-3 w-3"})})]}),(0,a.jsx)(j.ZL,{children:(0,a.jsx)(j.UC,{className:"bg-white rounded-md shadow-lg border border-gray-200 z-50",children:(0,a.jsxs)(j.LM,{className:"p-1",children:[(0,a.jsxs)(j.q7,{value:"solid",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"实线"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)(j.q7,{value:"dashed",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"虚线"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)(j.q7,{value:"dotted",className:"relative flex items-center px-2 py-1 text-xs rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,a.jsx)(j.p4,{children:"点线"}),(0,a.jsx)(j.VF,{className:"absolute right-2",children:(0,a.jsx)(C.A,{className:"h-3 w-3"})})]})]})})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(N.b,{className:"block text-xs text-gray-600 mb-1",children:"颜色"}),(0,a.jsx)("input",{type:"color",value:(null==(S=H.style)?void 0:S.borderColor)||"#000000",onChange:e=>M("borderColor",e.target.value),className:"w-full h-8 border border-gray-300 rounded cursor-pointer","aria-label":"选择边框颜色",title:"选择边框颜色"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"圆角"}),(0,a.jsx)("input",{type:"number",value:(null==(A=H.style)?void 0:A.borderRadius)||"",onChange:e=>M("borderRadius",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",max:"100"})]})]})]})})]})]})]})},T)}r(5495);var L=r(7434),R=r(2158),S=r(7213),A=r(9917),T=r(8293),B=r(5968),D=r(1586),z=r(7712),E=r(6042);L.A,R.A,S.A,A.A,T.A,B.A,D.A,z.A,E.A;var H=r(8021),V=r(3052),P=r(4416),M=r(7924);let U={text:L.A,button:R.A,image:S.A,input:A.A,container:T.A,list:B.A,card:D.A,divider:z.A,space:E.A};function F(e){let{node:t,onSelect:r,onDelete:s,onToggleExpanded:n,onMove:l,isSelected:i}=e,d=p(t.type),o=U[t.type]||L.A,c=t.children.length>0,{attributes:u,listeners:g,setNodeRef:h,isDragging:m}=(0,x.PM)({id:"tree-node-".concat(t.id),data:{type:"tree-node",nodeId:t.id,node:t}}),{isOver:f,setNodeRef:b}=(0,x.zM)({id:"tree-drop-before-".concat(t.id),data:{type:"tree-drop",nodeId:t.id,position:"before",canHaveChildren:d.canHaveChildren}}),{isOver:v,setNodeRef:y}=(0,x.zM)({id:"tree-drop-inside-".concat(t.id),data:{type:"tree-drop",nodeId:t.id,position:"inside",canHaveChildren:d.canHaveChildren},disabled:!d.canHaveChildren}),{isOver:j,setNodeRef:N}=(0,x.zM)({id:"tree-drop-after-".concat(t.id),data:{type:"tree-drop",nodeId:t.id,position:"after",canHaveChildren:d.canHaveChildren}});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{ref:b,className:"h-1 ".concat(f?"bg-blue-400":"")}),(0,a.jsxs)("div",{ref:h,className:"group flex items-center py-1 px-2 cursor-pointer hover:bg-gray-50 ".concat(i?"bg-blue-100 text-blue-800":""," ").concat(m?"opacity-50":""," ").concat(v&&d.canHaveChildren?"bg-green-50 border-l-2 border-green-400":""),style:{paddingLeft:"".concat(16*t.depth+8,"px")},onClick:()=>{r(t.id)},children:[(0,a.jsx)("div",{...u,...g,className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 rounded mr-1 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(H.A,{className:"h-3 w-3 text-gray-400"})}),c?(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),n(t.id)},className:"p-0.5 hover:bg-gray-200 rounded mr-1",children:t.isExpanded?(0,a.jsx)(w.A,{className:"h-3 w-3"}):(0,a.jsx)(V.A,{className:"h-3 w-3"})}):(0,a.jsx)("div",{className:"w-4 mr-1"}),(0,a.jsx)(o,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,a.jsx)("span",{ref:d.canHaveChildren?y:void 0,className:"text-sm flex-1 truncate",children:t.name||d.name}),d.canHaveChildren&&(0,a.jsx)("span",{className:"text-xs px-1 py-0.5 bg-green-100 text-green-700 rounded text-[10px] mr-1",children:"容器"}),!t.isVisible&&(0,a.jsx)("span",{className:"text-xs px-1 py-0.5 bg-gray-100 text-gray-600 rounded text-[10px] mr-1",children:"隐藏"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 hover:text-red-600 rounded","aria-label":"删除组件",children:(0,a.jsx)(P.A,{className:"h-3 w-3"})})]}),c&&t.isExpanded&&(0,a.jsx)("div",{children:t.children.map(e=>(0,a.jsx)(F,{node:e,onSelect:r,onDelete:s,onToggleExpanded:n,onMove:l,isSelected:i},e.id))}),(0,a.jsx)("div",{ref:N,className:"h-1 ".concat(j?"bg-blue-400":"")})]})}function W(){let{getTreeNodes:e,selectedComponentId:t,selectComponent:r,deleteComponent:n,toggleNodeExpanded:i,moveComponent:d,treeManager:o}=(0,l.U)(),[c,x]=(0,s.useState)(""),u=e();(0,s.useEffect)(()=>{console.log("TreeViewV2: 树节点更新",{nodeCount:u.length,nodes:u.map(e=>({id:e.id,name:e.name,type:e.type})),treeManagerExists:!!o})},[u,o]);let p=(0,s.useMemo)(()=>{if(!c)return u;let e=t=>t.reduce((t,r)=>{if(r.name.toLowerCase().includes(c.toLowerCase())||r.type.toLowerCase().includes(c.toLowerCase()))t.push(r);else if(r.children.length>0){let a=e(r.children);a.length>0&&t.push({...r,children:a,isExpanded:!0})}return t},[]);return e(u)},[u,c]),g=e=>{r(e)},h=t=>{console.log("TreeViewV2: 删除组件",t),console.log("TreeViewV2: 删除前节点数量",u.length),n(t),setTimeout(()=>{console.log("TreeViewV2: 删除后节点数量",e().length)},100)},m=e=>{i(e)},f=(e,t,r)=>{console.log("TreeViewV2: 移动组件",{dragId:e,hoverId:t,position:r}),d(e,t,r)};return 0===u.length?(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-3 border-b",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"搜索组件...",value:c,onChange:e=>x(e.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500 py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDF33"}),(0,a.jsx)("p",{className:"text-sm",children:"暂无组件"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"拖拽组件到画布开始编辑"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-3 border-b",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"搜索组件...",value:c,onChange:e=>x(e.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})}),(0,a.jsx)("div",{className:"px-3 py-2 bg-blue-50 border-b text-xs text-blue-700",children:"\uD83D\uDCA1 单击选中，箭头展开/收起，拖拽手柄重新排序，支持搜索过滤"}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:p.map(e=>(0,a.jsx)(F,{node:e,onSelect:g,onDelete:h,onToggleExpanded:m,onMove:f,isSelected:t===e.id},e.id))})]})}function q(){return(0,a.jsx)("div",{className:"w-80 border-r border-gray-200 bg-white flex flex-col",children:(0,a.jsxs)(v.bL,{defaultValue:"materials",className:"flex flex-col h-full",children:[(0,a.jsxs)(v.B8,{className:"flex border-b border-gray-200","aria-label":"左侧面板选项",children:[(0,a.jsxs)(v.l9,{value:"materials",className:" flex-1 px-4 py-3 text-sm font-medium text-center transition-colors text-gray-500 hover:text-gray-700 hover:bg-gray-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2  data-[state=active]:border-blue-600 data-[state=active]:bg-blue-50 ",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83E\uDDE9"}),"组件库"]}),(0,a.jsxs)(v.l9,{value:"tree",className:" flex-1 px-4 py-3 text-sm font-medium text-center transition-colors text-gray-500 hover:text-gray-700 hover:bg-gray-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2  data-[state=active]:border-blue-600 data-[state=active]:bg-blue-50 ",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83C\uDF33"}),"组件树"]})]}),(0,a.jsx)(v.UC,{value:"materials",className:"flex-1 overflow-hidden focus:outline-none",children:(0,a.jsx)("div",{className:"h-full p-4 overflow-y-auto",children:(0,a.jsx)(b,{})})}),(0,a.jsx)(v.UC,{value:"tree",className:"flex-1 overflow-hidden focus:outline-none",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto",children:(0,a.jsx)(W,{})})})]})})}var I=r(1184),_=r(2502),Z=r(8956);let O=[{id:"comp_1",type:"text",name:"标题文本",props:{text:"欢迎使用H5低代码编辑器"},style:{fontSize:"24px",fontWeight:"bold",color:"#333333",textAlign:"center",paddingTop:"20px",paddingBottom:"20px",paddingLeft:"20px",paddingRight:"20px",marginTop:"10px",marginBottom:"10px",marginLeft:"0px",marginRight:"0px"}},{id:"comp_2",type:"button",name:"主要按钮",props:{text:"开始体验"},style:{backgroundColor:"#1890ff",color:"#ffffff",paddingTop:"12px",paddingBottom:"12px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"6px",fontSize:"16px",marginTop:"20px",marginBottom:"20px",marginLeft:"auto",marginRight:"auto",display:"block",width:"200px"}}],K={id:"page_1",name:"首页",title:"示例页面",description:"这是一个示例页面",components:O,createdAt:new Date("2024-01-01T00:00:00Z"),updatedAt:new Date("2024-01-01T00:00:00Z")},X={id:"project_1",name:"示例项目",description:"H5低代码编辑器示例项目",pages:[K],createdAt:new Date("2024-01-01T00:00:00Z"),updatedAt:new Date("2024-01-01T00:00:00Z")};function Y(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("pageId"),{setCurrentPage:r,addComponent:i,moveComponent:d}=(0,l.U)(),{getPageById:o}=(0,Z.s)(),c=(0,x.FR)((0,x.MS)(x.AN,{activationConstraint:{distance:8}}));return(0,s.useEffect)(()=>{if(t){let a=o(t);a?r(a):e.push("/")}else{let{page:e}={project:X,page:K,components:O};r(e)}},[t,r,o,e]),(0,a.jsx)(x.Mp,{sensors:c,collisionDetection:x.fp,onDragEnd:e=>{var t,r,a;let{active:s,over:n}=e;if(n){if((null==(t=s.data.current)?void 0:t.type)==="material"){let e=s.data.current.config,t={id:"comp_".concat(Date.now()),type:e.type,name:e.name,props:e.defaultProps,style:e.defaultStyle};"canvas-drop-zone"===n.id?i(t):"string"==typeof n.id&&n.id.startsWith("component-")&&i(t,n.id.replace("component-",""))}else if((null==(r=s.data.current)?void 0:r.type)==="tree-node"&&(null==(a=n.data.current)?void 0:a.type)==="tree-drop"){let e=s.data.current.nodeId,t=n.data.current.nodeId,r=n.data.current.position;e!==t&&d(e,t,r)}}},children:(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,a.jsx)(I.M,{}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsx)(q,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center p-8 overflow-auto",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(_.Mj,{title:"页面编辑",children:(0,a.jsx)(m,{})})})}),(0,a.jsx)("div",{className:"w-[420px] property-panel overflow-y-auto",children:(0,a.jsx)(k,{})})]})]})})}function $(){return(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"正在加载编辑器..."})]})})}function G(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)($,{}),children:(0,a.jsx)(Y,{})})}},6076:(e,t,r)=>{Promise.resolve().then(r.bind(r,1905))},8956:(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var a=r(8693),s=r(6786);let n=()=>"page_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),l=(0,a.vt)()((0,s.Zr)((e,t)=>({pages:[],createPage:(r,a,s)=>{let{pages:l}=t(),i={id:n(),name:r,title:a,description:s,components:[],createdAt:new Date,updatedAt:new Date};return e({pages:[...l,i]}),i},updatePage:(r,a)=>{let{pages:s}=t();e({pages:s.map(e=>e.id===r?{...e,...a,updatedAt:new Date}:e)})},deletePage:r=>{let{pages:a}=t();e({pages:a.filter(e=>e.id!==r)})},getPageById:e=>{let{pages:r}=t();return r.find(t=>t.id===e)||null},duplicatePage:r=>{let{pages:a}=t(),s=a.find(e=>e.id===r);if(!s)return null;let l={...s,id:n(),name:"".concat(s.name," 副本"),title:"".concat(s.title," 副本"),createdAt:new Date,updatedAt:new Date};return e({pages:[...a,l]}),l},generatePageId:n}),{name:"pages-storage",version:1}))}},e=>{var t=t=>e(e.s=t);e.O(0,[493,277,679,898,714,465,502,184,441,684,358],()=>t(6076)),_N_E=e.O()}]);