(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{5181:function(e,s,a){Promise.resolve().then(a.bind(a,2080))},2080:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return eB}});var t=a(7437),l=a(2265),n=a(5186),r=a(3643),i=a(4508);function c(e){let{className:s,children:a,...l}=e;return(0,t.jsxs)(r.fC,{"data-slot":"scroll-area",className:(0,i.cn)("relative",s),...l,children:[(0,t.jsx)(r.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,t.jsx)(d,{}),(0,t.jsx)(r.Ns,{})]})}function d(e){let{className:s,orientation:a="vertical",...l}=e;return(0,t.jsx)(r.gb,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,i.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",s),...l,children:(0,t.jsx)(r.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var o=a(1312);function x(e){let{className:s,...a}=e;return(0,t.jsx)(o.fC,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(o.aV,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...a})}function m(e){let{className:s,...a}=e;return(0,t.jsx)(o.xz,{"data-slot":"tabs-trigger",className:(0,i.cn)("cursor-pointer data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function u(e){let{className:s,...a}=e;return(0,t.jsx)(o.VY,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",s),...a})}var p=a(5277),v=a(3113),j=a(7533),g=a(1094),b=a(9374),f=a(2106),y=a(1428);let N={basic:[{type:"text",name:"文本",icon:p.Z,defaultProps:{content:"请输入文本"},defaultStyle:{width:150,height:40}},{type:"image",name:"图片",icon:v.Z,defaultProps:{src:"https://img4.yishouapp.com/obs/public_prefix/2025/6/25/12cd92ea3ce549964a2f3d349f2b1651.png",alt:"默认图片"},defaultStyle:{width:200,height:120}},{type:"button",name:"按钮",icon:j.Z,defaultProps:{text:"点击按钮",variant:"default"},defaultStyle:{width:200,height:44}},{type:"container",name:"容器",icon:g.Z,defaultProps:{backgroundColor:"#f5f5f5"},defaultStyle:{width:200,height:100}}],media:[{type:"video",name:"视频",icon:b.Z,defaultProps:{src:"",autoplay:!1},defaultStyle:{width:200,height:120}},{type:"audio",name:"音频",icon:f.Z,defaultProps:{src:""},defaultStyle:{width:200,height:40}}],form:[{type:"input",name:"输入框",icon:p.Z,defaultProps:{placeholder:"请输入内容"},defaultStyle:{width:200,height:40}},{type:"textarea",name:"文本域",icon:p.Z,defaultProps:{placeholder:"请输入内容"},defaultStyle:{width:200,height:80}}],utility:[{type:"divider",name:"分割线",icon:p.Z,defaultProps:{color:"#e0e0e0",thickness:"1"},defaultStyle:{width:200,height:1}},{type:"space",name:"间距",icon:g.Z,defaultProps:{backgroundColor:"transparent"},defaultStyle:{width:200,height:20}}]};function w(){let{components:e,addComponent:s}=(0,y.jE)(),[a,r]=(0,l.useState)(""),i=s=>{var a;let t=Number(null===(a=s.defaultStyle)||void 0===a?void 0:a.width)||200;if(0===e.length)return{top:8,left:8};let l=e.reduce((e,s)=>{let a=parseInt(e.id.split("-").pop()||"0");return parseInt(s.id.split("-").pop()||"0")>a?s:e}),n=l.style.left||0,r=l.style.top||0,i=l.style.width||200,c=l.style.height||100,d=n+i+8;if(d+t<=319)return{top:r,left:d};let o=Math.max(c,...e.filter(e=>8>Math.abs((e.style.top||0)-r)).map(e=>e.style.height||100));return{top:r+o+8,left:8}},d=(e,s)=>{try{let a=JSON.stringify(s);e.dataTransfer.setData("application/json",a),e.dataTransfer.effectAllowed="copy"}catch(e){console.error("设置拖拽数据时出错:",e)}},o=e=>{try{let a=i(e),t={id:"".concat(e.type,"-").concat(Date.now()),type:e.type,props:{...e.defaultProps},style:{position:"absolute",top:a.top,left:a.left,...e.defaultStyle}};s(t)}catch(e){console.error("添加组件时出错:",e)}},p=Object.entries(N).reduce((e,s)=>{let[t,l]=s,n=l.filter(e=>e.name.toLowerCase().includes(a.toLowerCase()));return n.length>0&&(e[t]=n),e},{});return(0,t.jsxs)("div",{className:"bg-white border-r border-gray-200 flex flex-col flex-1",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3 text-gray-800",children:"组件库"}),(0,t.jsx)(n.I,{placeholder:"搜索组件...",value:a,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsx)(c,{className:"flex-1 px-2",children:(0,t.jsxs)(x,{defaultValue:"basic",className:"w-full",children:[(0,t.jsxs)(h,{className:"grid w-full grid-cols-4 mt-4 mb-2 px-2",children:[(0,t.jsx)(m,{value:"basic",className:"text-xs font-medium flex-1 whitespace-nowrap",children:"基础"}),(0,t.jsx)(m,{value:"media",className:"text-xs font-medium flex-1 whitespace-nowrap",children:"媒体"}),(0,t.jsx)(m,{value:"form",className:"text-xs font-medium flex-1 whitespace-nowrap",children:"表单"}),(0,t.jsx)(m,{value:"utility",className:"text-xs font-medium flex-1 whitespace-nowrap",children:"工具"})]}),Object.entries(p).map(e=>{let[s,a]=e;return(0,t.jsx)(u,{value:s,className:"py-2 px-2 space-y-2",children:a.map(e=>{let s=e.icon;return(0,t.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 hover:shadow-md transition-all duration-200 select-none",draggable:!0,onDragStart:s=>d(s,e),onClick:()=>o(e),title:"拖拽或点击添加".concat(e.name),children:[(0,t.jsx)(s,{className:"w-5 h-5 mr-3 text-gray-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]},e.type)})},s)})]})})]})}var k=a(2114),C=a(2869),I=a(8867),z=a(8930),D=a(2020),Z=a(7099);function E(e){let{component:s,onDrag:a,onDragStart:n,onDragEnd:r,isPreview:i=!1}=e,{selectedId:c,setSelectedId:d,updateComponent:o,deleteComponent:x,duplicateComponent:h}=(0,y.jE)(),[m,u]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1),[j,g]=(0,l.useState)({x:0,y:0,componentX:0,componentY:0}),b=(0,l.useRef)(null),f=c===s.id,N=e=>{if(!m||i)return;let t=e.clientX-j.x,l=e.clientY-j.y,n=j.componentX+t,r=j.componentY+l;if(a){let{left:e,top:t}=a(s.id,n,r);o(s.id,{style:{...s.style,left:e,top:t}})}else{let e=s.style.width||200;o(s.id,{style:{...s.style,left:Math.max(0,Math.min(n,375-e)),top:Math.max(0,r)}})}},w=()=>{m&&(u(!1),null==r||r())};return(l.useEffect(()=>{if(m&&!i)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",w)}},[m,j,i]),"none"===s.style.display)?null:(0,t.jsx)(k.x,{component:s,isPreview:i,children:(0,t.jsxs)("div",{ref:b,className:"absolute select-none ".concat(i?"":m?"cursor-grabbing":s.locked?"cursor-not-allowed":"cursor-grab"," ").concat(f&&!i?"ring-2 ring-blue-500 ring-offset-1":""),style:{top:s.style.top||0,left:s.style.left||0,width:s.style.width||200,height:s.style.height||100,zIndex:m?100:f?10:1,display:s.style.display||"block"},onMouseDown:e=>{if(i||s.locked)return;let a=e.target;a.closest("button")||a.closest('[role="button"]')||(e.preventDefault(),e.stopPropagation(),d(s.id),g({x:e.clientX,y:e.clientY,componentX:s.style.left||0,componentY:s.style.top||0}),u(!0),null==n||n(s.id))},id:"component-".concat(s.id),children:[(0,t.jsx)(D.Z,{component:s,mode:"editor"}),f&&!m&&!i&&(0,t.jsxs)("div",{className:"absolute -top-8 left-0 flex gap-1 bg-white border border-gray-200 rounded shadow-lg opacity-90 hover:opacity-100 transition-opacity z-50",children:[(0,t.jsx)(C.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover:bg-gray-100 ".concat(s.locked?"opacity-50 cursor-not-allowed":""),onClick:e=>{e.preventDefault(),e.stopPropagation(),s.locked||(console.log("复制组件:",s.id),h(s.id))},title:s.locked?"组件已锁定":"复制组件",disabled:s.locked,children:(0,t.jsx)(I.Z,{className:"w-3 h-3"})}),(0,t.jsx)(C.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover:bg-gray-100 text-red-500 hover:text-red-600 ".concat(s.locked?"opacity-50 cursor-not-allowed":""),onClick:e=>{e.preventDefault(),e.stopPropagation(),s.locked||(console.log("点击删除按钮:",s.id),v(!0))},title:s.locked?"组件已锁定":"删除组件",disabled:s.locked,children:(0,t.jsx)(z.Z,{className:"w-3 h-3"})}),(0,t.jsx)(Z.aR,{open:p,onOpenChange:v,children:(0,t.jsxs)(Z._T,{className:"top-[20%] translate-y-0",children:[(0,t.jsxs)(Z.fY,{children:[(0,t.jsx)(Z.f$,{children:"确认删除组件"}),(0,t.jsxs)(Z.yT,{children:["您确定要删除这个 ",s.type," 组件吗？此操作无法撤销。"]})]}),(0,t.jsxs)(Z.xo,{children:[(0,t.jsx)(Z.le,{onClick:()=>v(!1),children:"取消"}),(0,t.jsx)(Z.OL,{onClick:()=>{console.log("确认删除组件:",s.id),x(s.id),v(!1)},className:"bg-red-600 hover:bg-red-700",children:"删除"})]})]})})]}),f&&!m&&!i&&(0,t.jsxs)("div",{className:"absolute -bottom-6 left-0 bg-blue-500 text-white text-xs px-2 py-1 rounded text-center min-w-max",children:[s.type," (",Math.round(s.style.left||0),", ",Math.round(s.style.top||0),")"]})]})})}function S(e){let{guides:s,draggedComponentId:a}=e,[n,r]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(a)r(s);else{let e=setTimeout(()=>{r([])},150);return()=>clearTimeout(e)}},[s,a]);let i=e=>{switch(e){case"component":default:return"bg-blue-500";case"canvas":return"bg-red-500";case"spacing":return"bg-amber-500"}},c=e=>{switch(e){case"component":default:return"#3b82f6";case"canvas":return"#ef4444";case"spacing":return"#f59e0b"}};return(0,t.jsxs)(t.Fragment,{children:[n.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"absolute pointer-events-none z-50 transition-opacity duration-150 ".concat("vertical"===e.type?"w-px h-full top-0":"h-px w-full left-0"," ").concat(i(e.color)," ").concat(e.show?"opacity-100":"opacity-0"),style:{["vertical"===e.type?"left":"top"]:e.position,boxShadow:"0 0 4px ".concat(c(e.color),"40")}}),e.show&&(0,t.jsx)("div",{className:"absolute w-1.5 h-1.5 rounded-full border-2 border-white pointer-events-none z-50 transition-all duration-150",style:{["vertical"===e.type?"left":"top"]:e.position-3,["vertical"===e.type?"top":"left"]:"50%",transform:"vertical"===e.type?"translateY(-50%)":"translateX(-50%)",backgroundColor:c(e.color),boxShadow:"0 0 8px ".concat(c(e.color),"60")}}),"spacing"===e.color&&e.show&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute pointer-events-none z-45 transition-all duration-150 opacity-80 ".concat(i(e.color)),style:{["vertical"===e.type?"left":"top"]:e.position-10,["vertical"===e.type?"top":"left"]:"50%",transform:"vertical"===e.type?"translateY(-50%)":"translateX(-50%)",width:"vertical"===e.type?"20px":"1px",height:"vertical"===e.type?"1px":"20px"}}),(0,t.jsx)("div",{className:"absolute pointer-events-none z-45 transition-all duration-150 opacity-80 ".concat(i(e.color)),style:{["vertical"===e.type?"left":"top"]:e.position+10,["vertical"===e.type?"top":"left"]:"50%",transform:"vertical"===e.type?"translateY(-50%)":"translateX(-50%)",width:"vertical"===e.type?"20px":"1px",height:"vertical"===e.type?"1px":"20px"}})]})]},e.id)),n.length>0&&a&&(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-white/80 backdrop-blur-sm border border-white/20 text-xs px-3 py-2 rounded-lg pointer-events-none z-50 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"组件对齐"})]}),n.some(e=>"canvas"===e.color)&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"画布对齐"})]}),n.some(e=>"spacing"===e.color)&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:"等距对齐"})]})]})})]})}let P=(e,s)=>8>Math.abs(e-s),V=(e,s,a,t,l)=>({id:e,type:s,position:a,show:!0,color:t,relatedComponents:l});function _(){let{components:e,addComponent:s,pageConfig:a,isCanvasSelected:n,setIsCanvasSelected:r}=(0,y.jE)(),[i,c]=(0,l.useState)([]),[d,o]=(0,l.useState)(null),x=(0,l.useMemo)(()=>{if(0===e.length)return a.height-24;let s=e.reduce((e,s)=>Math.max(e,(s.style.top||0)+(s.style.height||100)),0);return Math.max(a.height-24,s+100)},[e,a.height]),h=(0,l.useCallback)(e=>{e.preventDefault();try{let t=e.dataTransfer.getData("application/json");if(!t||""===t.trim()){console.warn("没有有效的拖拽数据");return}let l=JSON.parse(t);if(!l||!l.type){console.warn("无效的组件数据结构:",l);return}let n=e.currentTarget.getBoundingClientRect(),r=Math.max(0,Math.min(e.clientX-n.left,a.width-200)),i=Math.max(0,e.clientY-n.top),c={id:"".concat(l.type,"-").concat(Date.now()),type:l.type,props:{...l.defaultProps},style:{position:"absolute",top:i,left:r,...l.defaultStyle}};s(c)}catch(e){console.error("处理拖拽数据时出错:",e)}},[s,a.width]),m=(0,l.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),u=(0,l.useCallback)(e=>{e.target===e.currentTarget&&r(!0)},[r]),p=(0,l.useCallback)((s,t,l)=>{let n=[],r=e.find(e=>e.id===s);if(!r)return{left:t,top:l,guides:[]};let i=r.style.width||200,d=r.style.height||100,o=t+i/2,x=l+d/2,h=t+i,m=l+d,u=t,p=l,v=!1,j=!1;e.forEach(e=>{if(e.id===s)return;let a=e.style.left||0,r=e.style.top||0,c=e.style.width||200,g=e.style.height||100,b=a+c,f=r+g;[{position:a,type:"left"},{position:b,type:"right"},{position:a+c/2,type:"center"}].forEach(a=>{let{position:l,type:r}=a,c=!1;"left"===r&&P(t,l)?(u=l,c=!0):"right"===r&&P(h,l)?(u=l-i,c=!0):"center"===r&&P(o,l)&&(u=l-i/2,c=!0),c&&!v&&(v=!0,n.push(V("v-".concat(e.id,"-").concat(r),"vertical",l,"component",[s,e.id])))}),[{position:r,type:"top"},{position:f,type:"bottom"},{position:r+g/2,type:"center"}].forEach(a=>{let{position:t,type:r}=a,i=!1;"top"===r&&P(l,t)?(p=t,i=!0):"bottom"===r&&P(m,t)?(p=t-d,i=!0):"center"===r&&P(x,t)&&(p=t-d/2,i=!0),i&&!j&&(j=!0,n.push(V("h-".concat(e.id,"-").concat(r),"horizontal",t,"component",[s,e.id])))}),P(t,b+20)?(u=b+20,n.push(V("spacing-h-".concat(e.id,"-right"),"vertical",b+10,"spacing",[s,e.id]))):P(h,a-20)&&(u=a-20-i,n.push(V("spacing-h-".concat(e.id,"-left"),"vertical",a-10,"spacing",[s,e.id]))),P(l,f+20)?(p=f+20,n.push(V("spacing-v-".concat(e.id,"-bottom"),"horizontal",f+10,"spacing",[s,e.id]))):P(m,r-20)&&(p=r-20-d,n.push(V("spacing-v-".concat(e.id,"-top"),"horizontal",r-10,"spacing",[s,e.id])))});let g=a.width-48;return[{position:24,type:"left",orientation:"vertical"},{position:g-24,type:"right",orientation:"vertical"},{position:g/2,type:"center",orientation:"vertical"},{position:24,type:"top",orientation:"horizontal"}].forEach(e=>{let{position:a,type:r,orientation:c}=e;"vertical"===c?"left"===r&&P(t,a)?(u=a,n.push(V("canvas-".concat(r),"vertical",a,"canvas",[s]))):"right"===r&&P(h,a)?(u=a-i,n.push(V("canvas-".concat(r),"vertical",a,"canvas",[s]))):"center"===r&&P(o,a)&&(u=a-i/2,n.push(V("canvas-".concat(r),"vertical",a,"canvas",[s]))):"top"===r&&P(l,a)&&(p=a,n.push(V("canvas-".concat(r),"horizontal",a,"canvas",[s])))}),u=Math.max(0,Math.min(u,a.width-i)),p=Math.max(0,p),c(n),{left:u,top:p,guides:n}},[e,a.width]),v=(0,l.useCallback)(e=>{o(e),c([])},[]),j=(0,l.useCallback)(()=>{o(null),c([])},[]),g=(0,l.useMemo)(()=>({width:a.width,height:Math.max(a.height,x+24),backgroundColor:a.backgroundColor}),[a.width,a.height,a.backgroundColor,x]),b=(0,l.useMemo)(()=>({height:x}),[x]);return(0,t.jsx)("div",{className:"py-8 px-4 min-h-full flex items-start justify-center",children:(0,t.jsxs)("div",{className:"bg-white rounded-[2rem] shadow-2xl border-8 relative overflow-hidden transition-all duration-200 ".concat(n?"border-blue-500 shadow-blue-200":"border-gray-800"),children:[(0,t.jsx)("div",{className:"h-6 bg-black flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("div",{className:"w-16 h-1 bg-white rounded-full"})}),(0,t.jsx)("div",{className:"w-full relative overflow-hidden",style:g,children:(0,t.jsxs)("div",{className:"w-full relative cursor-pointer",style:b,onDrop:h,onDragOver:m,onClick:u,children:[0===e.length&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-sm pointer-events-none",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDFA8"}),(0,t.jsx)("p",{className:"font-medium",children:"拖拽组件到此处开始设计"}),(0,t.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"点击组件直接添加，拖拽即可移动"}),(0,t.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"点击画布可配置H5页面属性"}),(0,t.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"按ESC键可取消选中"})]})}),n&&(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded shadow-lg pointer-events-none z-50",children:"H5页面已选中 - 按ESC取消选中"}),(0,t.jsx)(S,{guides:i,draggedComponentId:d}),e.map(e=>(0,t.jsx)(E,{component:e,onDrag:p,onDragEnd:j,onDragStart:v},e.id))]})})]})})}var Q=a(6394);function M(e){let{className:s,...a}=e;return(0,t.jsx)(Q.f,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}var L=a(6818),T=a(8846);function B(e){let{className:s,defaultValue:a,value:n,min:r=0,max:c=100,...d}=e,o=l.useMemo(()=>Array.isArray(n)?n:Array.isArray(a)?a:[r,c],[n,a,r,c]);return(0,t.jsxs)(T.fC,{"data-slot":"slider",defaultValue:a,value:n,min:r,max:c,className:(0,i.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...d,children:[(0,t.jsx)(T.fQ,{"data-slot":"slider-track",className:(0,i.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(T.e6,{"data-slot":"slider-range",className:(0,i.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(e,s)=>(0,t.jsx)(T.bU,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var F=a(6512),Y=a(7053);let R=(0,a(535).j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function q(e){let{className:s,variant:a,asChild:l=!1,...n}=e,r=l?Y.g7:"span";return(0,t.jsx)(r,{"data-slot":"badge",className:(0,i.cn)(R({variant:a}),s),...n})}var A=a(3647),X=a(721);function O(e){let{className:s,...a}=e;return(0,t.jsx)(X.fC,{"data-slot":"switch",className:(0,i.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(X.bU,{"data-slot":"switch-thumb",className:(0,i.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var U=a(1239),H=a(3276),W=a(9076),K=a(2208);let J=[{value:"none",label:"无动画"},{value:"fadeIn",label:"淡入"},{value:"slideInLeft",label:"从左滑入"},{value:"slideInRight",label:"从右滑入"},{value:"slideInUp",label:"从下滑入"},{value:"slideInDown",label:"从上滑入"},{value:"zoomIn",label:"缩放进入"},{value:"bounceIn",label:"弹跳进入"},{value:"rotateIn",label:"旋转进入"},{value:"flipInX",label:"水平翻转进入"},{value:"flipInY",label:"垂直翻转进入"}],G=[{value:"none",label:"无动画"},{value:"scale",label:"缩放"},{value:"rotate",label:"旋转"},{value:"translateY",label:"上下移动"},{value:"pulse",label:"脉冲"},{value:"heartBeat",label:"心跳"},{value:"wobble",label:"摇摆"}],$=[{value:"none",label:"无动画"},{value:"bounce",label:"弹跳"},{value:"pulse",label:"脉冲"},{value:"heartBeat",label:"心跳"},{value:"flash",label:"闪烁"},{value:"rubberBand",label:"橡皮筋"}],ee=[{value:"ease",label:"缓动"},{value:"ease-in",label:"缓入"},{value:"ease-out",label:"缓出"},{value:"ease-in-out",label:"缓入缓出"},{value:"linear",label:"线性"},{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",label:"弹性"}];function es(){var e,s,a,n,r,i,c,d,o,x,h,m,u,p,v,g,b,f,N,w,k;let{components:I,selectedId:z,updateComponent:D}=(0,y.jE)(),[Z,E]=(0,l.useState)(0),S=I.find(e=>e.id===z);if(!S)return(0,t.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(U.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"动画设置"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请选择一个组件来设置动画"})]})]})});let P=(e,s,a)=>{let t=S.animations||{},l=t[e]||{};D(S.id,{animations:{...t,[e]:{...l,[s]:a}}})},V=e=>{switch(e){case"fadeIn":default:return"animate__fadeIn";case"slideInLeft":return"animate__slideInLeft";case"slideInRight":return"animate__slideInRight";case"slideInUp":return"animate__slideInUp";case"slideInDown":return"animate__slideInDown";case"zoomIn":return"animate__zoomIn";case"bounceIn":return"animate__bounceIn";case"rotateIn":return"animate__rotateIn";case"flipInX":return"animate__flipInX";case"flipInY":return"animate__flipInY"}},_=S.animations||{};return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"w-5 h-5 text-purple-600"}),(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"动画设置"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(C.z,{variant:"outline",size:"sm",onClick:()=>{var e;let s=document.getElementById("component-".concat(S.id));if(!s){console.warn("未找到预览元素:","component-".concat(S.id));return}if(!(null===(e=_.entrance)||void 0===e?void 0:e.type)||"none"===_.entrance.type){console.warn("没有设置入场动画");return}let a=_.entrance.type,t=_.entrance.duration||1;console.log("开始预览动画:",{animationType:a,duration:t});let l=V(a);s.classList.remove("animate__animated"),s.classList.forEach(e=>{e.startsWith("animate__")&&s.classList.remove(e)}),s.style.setProperty("--animate-duration","".concat(t,"s")),s.classList.add("animate__animated",l);let n=()=>{s.classList.remove("animate__animated",l),s.style.removeProperty("--animate-duration"),s.removeEventListener("animationend",n)};s.addEventListener("animationend",n),E(e=>e+1)},className:"h-8 px-3 bg-transparent",children:[(0,t.jsx)(H.Z,{className:"w-3 h-3 mr-1"}),"预览"]}),(0,t.jsxs)(C.z,{variant:"outline",size:"sm",onClick:()=>{D(S.id,{animations:{}})},className:"h-8 px-3 bg-transparent",children:[(0,t.jsx)(W.Z,{className:"w-3 h-3 mr-1"}),"重置"]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(K.Z,{className:"w-4 h-4"}),"进入动画"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"动画类型"}),(0,t.jsxs)(A.Ph,{value:(null===(e=_.entrance)||void 0===e?void 0:e.type)||"none",onValueChange:e=>P("entrance","type",e),children:[(0,t.jsx)(A.i4,{className:"h-10",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:J.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]})]}),(null===(s=_.entrance)||void 0===s?void 0:s.type)&&"none"!==_.entrance.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"持续时间"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(a=_.entrance)||void 0===a?void 0:a.duration)||.6],onValueChange:e=>{let[s]=e;return P("entrance","duration",s)},max:3,min:.1,step:.1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0.1s"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(n=_.entrance)||void 0===n?void 0:n.duration)||.6,"s"]}),(0,t.jsx)("span",{children:"3.0s"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"延迟时间"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(r=_.entrance)||void 0===r?void 0:r.delay)||0],onValueChange:e=>{let[s]=e;return P("entrance","delay",s)},max:2,min:0,step:.1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0s"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(i=_.entrance)||void 0===i?void 0:i.delay)||0,"s"]}),(0,t.jsx)("span",{children:"2.0s"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"缓动函数"}),(0,t.jsxs)(A.Ph,{value:(null===(c=_.entrance)||void 0===c?void 0:c.easing)||"ease",onValueChange:e=>P("entrance","easing",e),children:[(0,t.jsx)(A.i4,{className:"h-10",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:ee.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]})]})]})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),"悬停动画"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"动画类型"}),(0,t.jsxs)(A.Ph,{value:(null===(d=_.hover)||void 0===d?void 0:d.type)||"none",onValueChange:e=>P("hover","type",e),children:[(0,t.jsx)(A.i4,{className:"h-10",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:G.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]})]}),(null===(o=_.hover)||void 0===o?void 0:o.type)&&"none"!==_.hover.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"持续时间"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(x=_.hover)||void 0===x?void 0:x.duration)||.3],onValueChange:e=>{let[s]=e;return P("hover","duration",s)},max:1,min:.1,step:.1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0.1s"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(h=_.hover)||void 0===h?void 0:h.duration)||.3,"s"]}),(0,t.jsx)("span",{children:"1.0s"})]})]})]}),"scale"===_.hover.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"缩放比例"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(m=_.hover)||void 0===m?void 0:m.scale)||1.1],onValueChange:e=>{let[s]=e;return P("hover","scale",s)},max:1.5,min:.8,step:.05,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0.8"}),(0,t.jsx)(q,{variant:"outline",className:"text-xs",children:(null===(u=_.hover)||void 0===u?void 0:u.scale)||1.1}),(0,t.jsx)("span",{children:"1.5"})]})]})]}),"rotate"===_.hover.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"旋转角度"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(p=_.hover)||void 0===p?void 0:p.rotate)||5],onValueChange:e=>{let[s]=e;return P("hover","rotate",s)},max:360,min:-360,step:5,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"-360\xb0"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(v=_.hover)||void 0===v?void 0:v.rotate)||5,"\xb0"]}),(0,t.jsx)("span",{children:"360\xb0"})]})]})]}),"translateY"===_.hover.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"移动距离"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(g=_.hover)||void 0===g?void 0:g.translateY)||-5],onValueChange:e=>{let[s]=e;return P("hover","translateY",s)},max:20,min:-20,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"-20px"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(b=_.hover)||void 0===b?void 0:b.translateY)||-5,"px"]}),(0,t.jsx)("span",{children:"20px"})]})]})]})]})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"w-4 h-4"}),"点击动画"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"动画类型"}),(0,t.jsxs)(A.Ph,{value:(null===(f=_.click)||void 0===f?void 0:f.type)||"none",onValueChange:e=>P("click","type",e),children:[(0,t.jsx)(A.i4,{className:"h-10",children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:$.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]})]}),(null===(N=_.click)||void 0===N?void 0:N.type)&&"none"!==_.click.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"持续时间"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[(null===(w=_.click)||void 0===w?void 0:w.duration)||.6],onValueChange:e=>{let[s]=e;return P("click","duration",s)},max:2,min:.1,step:.1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0.1s"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[(null===(k=_.click)||void 0===k?void 0:k.duration)||.6,"s"]}),(0,t.jsx)("span",{children:"2.0s"})]})]})]})]})]})]}),(0,t.jsx)("div",{className:"hidden",children:(0,t.jsx)("div",{className:"animate-preview-trigger"},Z)}),(0,t.jsx)("div",{className:"mt-8 p-4 bg-purple-50 rounded-lg border border-purple-200",children:(0,t.jsxs)("p",{className:"text-xs text-purple-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"✨"}),"动画效果在预览模式下可以完整体验"]})})]})}var ea=a(6362),et=a(3417),el=a(4935),en=a(4743),er=a(9397);let ei=[{value:"click",label:"点击",icon:"\uD83D\uDC46"},{value:"dblclick",label:"双击",icon:"\uD83D\uDC46\uD83D\uDC46"},{value:"longpress",label:"长按",icon:"\uD83D\uDC46⏱️"},{value:"input",label:"输入",icon:"⌨️"},{value:"change",label:"改变",icon:"\uD83D\uDD04"},{value:"focus",label:"获得焦点",icon:"\uD83C\uDFAF"},{value:"blur",label:"失去焦点",icon:"\uD83D\uDC7B"}],ec=[{type:"navigate",name:"跳转页面",description:"跳转到指定URL",icon:"ExternalLink",configFields:[{key:"url",label:"URL地址",type:"url",required:!0,placeholder:"https://example.com"},{key:"newTab",label:"新标签页打开",type:"boolean",defaultValue:!0}]},{type:"showMessage",name:"显示消息",description:"显示临时消息提示",icon:"MessageSquare",configFields:[{key:"message",label:"消息内容",type:"text",required:!0,placeholder:"请输入消息内容"},{key:"duration",label:"显示时长(毫秒)",type:"number",defaultValue:3e3}]},{type:"copyText",name:"复制文本",description:"复制指定文本到剪贴板",icon:"Copy",configFields:[{key:"text",label:"要复制的文本",type:"textarea",required:!0,placeholder:"请输入要复制的文本"}]},{type:"executeScript",name:"执行脚本",description:"执行自定义JavaScript代码",icon:"Code",configFields:[{key:"script",label:"JavaScript代码",type:"textarea",required:!0,placeholder:'console.log("Hello World");'}]},{type:"sendRequest",name:"发送请求",description:"发送HTTP请求",icon:"Send",configFields:[{key:"url",label:"请求URL",type:"url",required:!0,placeholder:"https://api.example.com/data"},{key:"method",label:"请求方法",type:"select",options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],defaultValue:"GET"}]},{type:"toggleElement",name:"切换元素",description:"显示或隐藏指定元素",icon:"Eye",configFields:[{key:"targetId",label:"目标元素ID",type:"text",required:!0,placeholder:"element-id"}]}];function ed(){let{components:e,selectedId:s,updateComponent:a}=(0,y.jE)(),[r,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1),[o,p]=(0,l.useState)(!1),v=e.find(e=>e.id===s);if(!v)return(0,t.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(U.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"事件管理"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"请选择一个组件来配置事件"})]})]})});let j=v.events||[],g=(e,s)=>{let t=j.map(a=>a.id===e?{...a,...s}:a);a(v.id,{events:t})},b=e=>{let s=j.filter(s=>s.id!==e);a(v.id,{events:s}),r===e&&i(null)},f=(e,s)=>{let t={id:"action-".concat(Date.now()),type:s.type,name:s.name,config:s.configFields.reduce((e,s)=>(void 0!==s.defaultValue&&(e[s.key]=s.defaultValue),e),{}),enabled:!0},l=j.map(s=>s.id===e?{...s,actions:[...s.actions,t]}:s);a(v.id,{events:l}),p(!1)},N=(e,s,t)=>{let l=j.map(a=>a.id===e?{...a,actions:a.actions.map(e=>e.id===s?{...e,...t}:e)}:a);a(v.id,{events:l})},w=(e,s)=>{let t=j.map(a=>a.id===e?{...a,actions:a.actions.filter(e=>e.id!==s)}:a);a(v.id,{events:t})},k=e=>{switch(e){case"navigate":return(0,t.jsx)(ea.Z,{className:"w-4 h-4"});case"showMessage":return(0,t.jsx)(et.Z,{className:"w-4 h-4"});case"copyText":return(0,t.jsx)(I.Z,{className:"w-4 h-4"});case"executeScript":return(0,t.jsx)(el.Z,{className:"w-4 h-4"});case"sendRequest":return(0,t.jsx)(en.Z,{className:"w-4 h-4"});case"toggleElement":return(0,t.jsx)(K.Z,{className:"w-4 h-4"});default:return(0,t.jsx)(H.Z,{className:"w-4 h-4"})}},D=j.find(e=>e.id===r);return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"事件管理"})]}),(0,t.jsxs)(C.z,{size:"sm",onClick:()=>d(!0),className:"h-8 px-3",children:[(0,t.jsx)(er.Z,{className:"w-3 h-3 mr-1"}),"添加事件"]})]}),c&&(0,t.jsx)("div",{className:"mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"新建事件"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.z,{size:"sm",onClick:()=>{let e={id:"event-".concat(Date.now()),type:"click",name:"点击事件",actions:[],enabled:!0};a(v.id,{events:[...j,e]}),d(!1)},children:"确定"}),(0,t.jsx)(C.z,{size:"sm",variant:"outline",onClick:()=>d(!1),children:"取消"})]})]})}),(0,t.jsxs)(x,{value:r?"config":"list",onValueChange:e=>{"list"===e?i(null):"config"===e&&j.length>0&&!r&&i(j[0].id)},children:[(0,t.jsxs)(h,{className:"grid w-full grid-cols-2 mb-4",children:[(0,t.jsx)(m,{value:"list",children:"事件列表"}),(0,t.jsx)(m,{value:"config",disabled:!r,children:"事件配置"})]}),(0,t.jsx)(u,{value:"list",className:"space-y-3",children:0===j.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(U.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm",children:"暂无事件"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:'点击"添加事件"开始配置'})]}):j.map(e=>{var s,a;return(0,t.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat(r===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>i(e.id),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-lg",children:(null===(s=ei.find(s=>s.value===e.type))||void 0===s?void 0:s.icon)||"⚡"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(a=ei.find(s=>s.value===e.type))||void 0===a?void 0:a.label)||e.type,e.actions.length>0&&" • ".concat(e.actions.length,"个动作")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O,{checked:e.enabled,onCheckedChange:s=>g(e.id,{enabled:s}),onClick:e=>e.stopPropagation()}),(0,t.jsx)(C.z,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",onClick:s=>{s.stopPropagation(),b(e.id)},children:(0,t.jsx)(z.Z,{className:"w-3 h-3"})})]})]})},e.id)})}),D&&(0,t.jsx)(u,{value:"config",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"事件名称"}),(0,t.jsx)(n.I,{value:D.name,onChange:e=>g(D.id,{name:e.target.value}),placeholder:"请输入事件名称"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"事件类型"}),(0,t.jsxs)(A.Ph,{value:D.type,onValueChange:e=>g(D.id,{type:e}),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{})}),(0,t.jsx)(A.Bw,{children:ei.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label})]})},e.value))})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"事件动作"}),(0,t.jsxs)(C.z,{size:"sm",onClick:()=>p(!0),className:"h-8 px-3",children:[(0,t.jsx)(er.Z,{className:"w-3 h-3 mr-1"}),"添加动作"]})]}),o&&(0,t.jsxs)("div",{className:"mb-4 p-4 border border-green-200 rounded-lg bg-green-50",children:[(0,t.jsx)("h5",{className:"font-medium mb-3",children:"选择动作类型"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:ec.map(e=>(0,t.jsx)(C.z,{variant:"outline",className:"justify-start h-auto p-3 bg-transparent",onClick:()=>f(D.id,e),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[k(e.type),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]})},e.type))}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(C.z,{size:"sm",variant:"outline",onClick:()=>p(!1),children:"取消"})})]}),(0,t.jsx)("div",{className:"space-y-3",children:D.actions.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[k(e.type),(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)(q,{variant:"secondary",className:"text-xs",children:["#",s+1]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O,{checked:e.enabled,onCheckedChange:s=>N(D.id,e.id,{enabled:s})}),(0,t.jsx)(C.z,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700 h-8 w-8 p-0",onClick:()=>w(D.id,e.id),children:(0,t.jsx)(z.Z,{className:"w-3 h-3"})})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[null===(a=ec.find(s=>s.type===e.type))||void 0===a?void 0:a.configFields.map(s=>{var a;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(M,{className:"text-sm text-gray-700 mb-1 block",children:[s.label,s.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"text"===s.type||"url"===s.type?(0,t.jsx)(n.I,{value:e.config[s.key]||"",onChange:a=>N(D.id,e.id,{config:{...e.config,[s.key]:a.target.value}}),placeholder:s.placeholder}):"number"===s.type?(0,t.jsx)(n.I,{type:"number",value:e.config[s.key]||"",onChange:a=>N(D.id,e.id,{config:{...e.config,[s.key]:Number(a.target.value)}}),placeholder:s.placeholder}):"textarea"===s.type?(0,t.jsx)(L.g,{value:e.config[s.key]||"",onChange:a=>N(D.id,e.id,{config:{...e.config,[s.key]:a.target.value}}),placeholder:s.placeholder,rows:3}):"boolean"===s.type?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O,{checked:e.config[s.key]||!1,onCheckedChange:a=>N(D.id,e.id,{config:{...e.config,[s.key]:a}})}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.config[s.key]?"是":"否"})]}):"select"===s.type?(0,t.jsxs)(A.Ph,{value:e.config[s.key]||"",onValueChange:a=>N(D.id,e.id,{config:{...e.config,[s.key]:a}}),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:s.placeholder})}),(0,t.jsx)(A.Bw,{children:null===(a=s.options)||void 0===a?void 0:a.map(e=>(0,t.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]}):null]},s.key)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-1 block",children:"延迟执行(毫秒)"}),(0,t.jsx)(n.I,{type:"number",value:e.delay||0,onChange:s=>N(D.id,e.id,{delay:Number(s.target.value)}),placeholder:"0",min:"0"})]})]})]},e.id)})})]})]})})]}),(0,t.jsx)("div",{className:"mt-8 p-4 bg-orange-50 rounded-lg border border-orange-200",children:(0,t.jsxs)("p",{className:"text-xs text-orange-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"⚡"}),"事件将在预览模式下生效，编辑模式下不会触发"]})})]})}var eo=a(8728),ex=a(2805),eh=a(1740);function em(){let{components:e,selectedId:s,updateComponent:a,pageConfig:r,setPageConfig:i,isCanvasSelected:d}=(0,y.jE)(),o=e.find(e=>e.id===s),b=(0,l.useMemo)(()=>{if(0===e.length)return r.height-24;let s=e.reduce((e,s)=>Math.max(e,(s.style.top||0)+(s.style.height||100)),0);return Math.max(r.height-24,s+100)},[e,r.height]);if(d)return(0,t.jsx)(c,{className:"h-full",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(eo.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"H5页面配置"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),"基本信息"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"页面标题"}),(0,t.jsx)(n.I,{value:r.title,onChange:e=>i({title:e.target.value}),placeholder:"请输入页面标题",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"页面描述"}),(0,t.jsx)(L.g,{value:r.description,onChange:e=>i({description:e.target.value}),placeholder:"请输入页面描述",rows:3,className:"resize-none"})]})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(ex.Z,{className:"w-4 h-4"}),"页面样式"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"背景颜色"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded border-2 border-gray-200 cursor-pointer",style:{backgroundColor:r.backgroundColor},onClick:()=>{var e;return null===(e=document.getElementById("page-bg-color"))||void 0===e?void 0:e.click()}}),(0,t.jsx)(n.I,{id:"page-bg-color",type:"color",value:r.backgroundColor,onChange:e=>i({backgroundColor:e.target.value}),className:"sr-only"}),(0,t.jsx)(n.I,{value:r.backgroundColor,onChange:e=>i({backgroundColor:e.target.value}),placeholder:"#ffffff",className:"flex-1 h-10 font-mono text-sm"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"画布宽度 (px)"}),(0,t.jsx)(n.I,{type:"number",value:r.width,onChange:e=>i({width:Number.parseInt(e.target.value)||375}),min:320,max:768,className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"最小高度 (px)"}),(0,t.jsx)(n.I,{type:"number",value:r.height,onChange:e=>i({height:Number.parseInt(e.target.value)||667}),min:480,max:1200,className:"h-10"})]})]})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"页面统计"}),(0,t.jsxs)("div",{className:"pl-6 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"组件数量"}),(0,t.jsxs)(q,{variant:"secondary",children:[e.length,"个"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"当前画布高度"}),(0,t.jsxs)(q,{variant:"outline",children:[Math.round(b),"px"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"扩展高度"}),(0,t.jsxs)(q,{variant:"outline",className:"text-blue-600",children:[Math.max(0,Math.round(b-(r.height-24))),"px"]})]})]})]})]}),(0,t.jsx)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("p",{className:"text-xs text-blue-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCA1"}),"按 ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-white border rounded text-xs font-mono",children:"ESC"})," ","键可取消选中"]})})]})});if(!o)return(0,t.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(eo.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"属性面板"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"请选择一个组件或点击画布来编辑属性"})]}),(0,t.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("p",{className:"text-xs text-blue-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCA1"}),"按 ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-white border rounded text-xs font-mono",children:"ESC"})," ","键可取消选中"]})})]})});let f=(e,s)=>{a(o.id,{props:{...o.props,[e]:s}})},N=(e,s)=>{a(o.id,{style:{...o.style,[e]:s}})},w=e=>{let{label:s,value:a,onChange:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:s}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded border-2 border-gray-200 cursor-pointer",style:{backgroundColor:a||"#000000"},onClick:()=>{var e;return null===(e=document.getElementById("color-".concat(s)))||void 0===e?void 0:e.click()}}),(0,t.jsx)(n.I,{id:"color-".concat(s),type:"color",value:a||"#000000",onChange:e=>l(e.target.value),className:"sr-only"}),(0,t.jsx)(n.I,{value:a||"#000000",onChange:e=>l(e.target.value),placeholder:"#000000",className:"flex-1 h-10 font-mono text-sm"})]})]})},k=e=>{let{value:s,onChange:a,min:l=12,max:n=48}=e,r=parseInt(s)||14;return(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"字体大小"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[r],onValueChange:e=>{let[s]=e;return a("".concat(s,"px"))},max:n,min:l,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:[l,"px"]}),(0,t.jsx)(q,{variant:"outline",className:"text-xs",children:s||"14px"}),(0,t.jsxs)("span",{children:[n,"px"]})]})]})]})};return(0,t.jsx)(c,{className:"h-full px-2",children:(0,t.jsxs)(x,{defaultValue:"properties",className:"w-full",children:[(0,t.jsxs)(h,{className:"grid w-full grid-cols-3 mt-4 mb-2 px-2 ",children:[(0,t.jsx)(m,{value:"properties",className:"text-sm flex-1 whitespace-nowrap",children:"属性"}),(0,t.jsx)(m,{value:"animations",className:"text-sm flex-1 whitespace-nowrap",children:"动画"}),(0,t.jsx)(m,{value:"events",className:"text-sm flex-1 whitespace-nowrap",children:"事件"})]}),(0,t.jsx)(u,{value:"properties",className:"p-0",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(e=>{switch(e){case"text":return(0,t.jsx)(p.Z,{className:"w-4 h-4"});case"image":return(0,t.jsx)(v.Z,{className:"w-4 h-4"});case"button":return(0,t.jsx)(j.Z,{className:"w-4 h-4"});case"container":return(0,t.jsx)(g.Z,{className:"w-4 h-4"});default:return(0,t.jsx)(eo.Z,{className:"w-4 h-4"})}})(o.type),(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"组件属性"}),(0,t.jsx)(q,{variant:"secondary",className:"text-xs",children:o.type})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(eo.Z,{className:"w-4 h-4"}),"基本信息"]}),(0,t.jsxs)("div",{className:"space-y-4 pl-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"组件ID"}),(0,t.jsx)(n.I,{value:o.id,disabled:!0,className:"bg-gray-50 h-10 text-xs font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"组件类型"}),(0,t.jsx)(n.I,{value:o.type,disabled:!0,className:"bg-gray-50 h-10"})]})]})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(eh.Z,{className:"w-4 h-4"}),"位置和尺寸"]}),(0,t.jsx)("div",{className:"space-y-4 pl-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"X坐标 (px)"}),(0,t.jsx)(n.I,{type:"number",value:o.style.left||0,onChange:e=>N("left",Number.parseInt(e.target.value)),className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"Y坐标 (px)"}),(0,t.jsx)(n.I,{type:"number",value:o.style.top||0,onChange:e=>N("top",Number.parseInt(e.target.value)),className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"宽度 (px)"}),(0,t.jsx)(n.I,{type:"number",value:o.style.width||100,onChange:e=>N("width",Number.parseInt(e.target.value)),className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"高度 (px)"}),(0,t.jsx)(n.I,{type:"number",value:o.style.height||100,onChange:e=>N("height",Number.parseInt(e.target.value)),className:"h-10"})]})]})})]}),(0,t.jsx)(F.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(ex.Z,{className:"w-4 h-4"}),"组件属性"]}),(0,t.jsx)("div",{className:"pl-6",children:(()=>{switch(o.type){case"text":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"文本内容"}),(0,t.jsx)(L.g,{value:o.props.content||"",onChange:e=>f("content",e.target.value),placeholder:"请输入文本内容",rows:3,className:"resize-none"})]}),(0,t.jsx)(k,{value:o.props.fontSize||"14px",onChange:e=>f("fontSize",e)}),(0,t.jsx)(w,{label:"文本颜色",value:o.props.color||"#000000",onChange:e=>f("color",e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"字体粗细"}),(0,t.jsxs)(A.Ph,{value:o.props.fontWeight||"normal",onValueChange:e=>f("fontWeight",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择字体粗细"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"lighter",children:"较细"}),(0,t.jsx)(A.Ql,{value:"normal",children:"正常"}),(0,t.jsx)(A.Ql,{value:"bold",children:"粗体"}),(0,t.jsx)(A.Ql,{value:"bolder",children:"更粗"})]})]})]})]});case"image":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"图片地址"}),(0,t.jsx)(n.I,{value:o.props.src||"",onChange:e=>f("src",e.target.value),placeholder:"请输入图片URL",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"替代文本"}),(0,t.jsx)(n.I,{value:o.props.alt||"",onChange:e=>f("alt",e.target.value),placeholder:"请输入图片描述",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"对象适应"}),(0,t.jsxs)(A.Ph,{value:o.props.objectFit||"cover",onValueChange:e=>f("objectFit",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择适应方式"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"cover",children:"覆盖"}),(0,t.jsx)(A.Ql,{value:"contain",children:"包含"}),(0,t.jsx)(A.Ql,{value:"fill",children:"填充"}),(0,t.jsx)(A.Ql,{value:"scale-down",children:"缩小"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"边框圆角"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[parseInt(o.props.borderRadius)||0],onValueChange:e=>{let[s]=e;return f("borderRadius","".concat(s,"px"))},max:50,min:0,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0px"}),(0,t.jsx)(q,{variant:"outline",className:"text-xs",children:o.props.borderRadius||"0px"}),(0,t.jsx)("span",{children:"50px"})]})]})]})]});case"button":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"按钮文本"}),(0,t.jsx)(n.I,{value:o.props.text||"",onChange:e=>f("text",e.target.value),placeholder:"请输入按钮文本",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"按钮样式"}),(0,t.jsxs)(A.Ph,{value:o.props.variant||"default",onValueChange:e=>f("variant",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择按钮样式"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"default",children:"默认"}),(0,t.jsx)(A.Ql,{value:"destructive",children:"危险"}),(0,t.jsx)(A.Ql,{value:"outline",children:"轮廓"}),(0,t.jsx)(A.Ql,{value:"secondary",children:"次要"}),(0,t.jsx)(A.Ql,{value:"ghost",children:"幽灵"}),(0,t.jsx)(A.Ql,{value:"link",children:"链接"})]})]})]}),(0,t.jsx)(w,{label:"背景颜色",value:o.props.backgroundColor||"#3b82f6",onChange:e=>f("backgroundColor",e)}),(0,t.jsx)(w,{label:"文本颜色",value:o.props.color||"#ffffff",onChange:e=>f("color",e)}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(M,{className:"text-sm text-gray-700",children:"禁用状态"}),(0,t.jsx)(O,{checked:o.props.disabled||!1,onCheckedChange:e=>f("disabled",e)})]})]});case"input":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"占位符文本"}),(0,t.jsx)(n.I,{value:o.props.placeholder||"",onChange:e=>f("placeholder",e.target.value),placeholder:"请输入占位符文本",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"输入类型"}),(0,t.jsxs)(A.Ph,{value:o.props.type||"text",onValueChange:e=>f("type",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择输入类型"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"text",children:"文本"}),(0,t.jsx)(A.Ql,{value:"password",children:"密码"}),(0,t.jsx)(A.Ql,{value:"email",children:"邮箱"}),(0,t.jsx)(A.Ql,{value:"number",children:"数字"}),(0,t.jsx)(A.Ql,{value:"tel",children:"电话"}),(0,t.jsx)(A.Ql,{value:"url",children:"网址"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"默认值"}),(0,t.jsx)(n.I,{value:o.props.value||"",onChange:e=>f("value",e.target.value),placeholder:"请输入默认值",className:"h-10"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(M,{className:"text-sm text-gray-700",children:"必填字段"}),(0,t.jsx)(O,{checked:o.props.required||!1,onCheckedChange:e=>f("required",e)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(M,{className:"text-sm text-gray-700",children:"禁用状态"}),(0,t.jsx)(O,{checked:o.props.disabled||!1,onCheckedChange:e=>f("disabled",e)})]})]});case"container":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{label:"背景颜色",value:o.props.backgroundColor||"#f5f5f5",onChange:e=>f("backgroundColor",e)}),(0,t.jsx)(w,{label:"边框颜色",value:o.props.borderColor||"#e5e7eb",onChange:e=>f("borderColor",e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"边框宽度"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[parseInt(o.props.borderWidth)||1],onValueChange:e=>{let[s]=e;return f("borderWidth","".concat(s,"px"))},max:10,min:0,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0px"}),(0,t.jsx)(q,{variant:"outline",className:"text-xs",children:o.props.borderWidth||"1px"}),(0,t.jsx)("span",{children:"10px"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"内边距"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[parseInt(o.props.padding)||16],onValueChange:e=>{let[s]=e;return f("padding","".concat(s,"px"))},max:50,min:0,step:2,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"0px"}),(0,t.jsx)(q,{variant:"outline",className:"text-xs",children:o.props.padding||"16px"}),(0,t.jsx)("span",{children:"50px"})]})]})]})]});case"divider":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{label:"分割线颜色",value:o.props.color||"#e0e0e0",onChange:e=>f("color",e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"线条粗细"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B,{value:[parseInt(o.props.thickness)||1],onValueChange:e=>{let[s]=e;return f("thickness",s.toString())},max:10,min:1,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"1px"}),(0,t.jsxs)(q,{variant:"outline",className:"text-xs",children:[o.props.thickness||"1","px"]}),(0,t.jsx)("span",{children:"10px"})]})]})]})]});case"space":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{label:"背景颜色",value:o.props.backgroundColor||"transparent",onChange:e=>f("backgroundColor",e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"间距说明"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 p-3 bg-gray-50 rounded",children:"间距组件用于在其他组件之间创建空白区域。您可以通过调整高度来控制间距大小。"})]})]});case"list":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"列表项 (每行一项)"}),(0,t.jsx)(L.g,{value:(o.props.items||[]).join("\n"),onChange:e=>f("items",e.target.value.split("\n").filter(e=>e.trim())),placeholder:"列表项 1 列表项 2 列表项 3",rows:4,className:"resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"列表样式"}),(0,t.jsxs)(A.Ph,{value:o.props.listStyle||"none",onValueChange:e=>f("listStyle",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择列表样式"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"none",children:"无样式"}),(0,t.jsx)(A.Ql,{value:"disc",children:"实心圆点"}),(0,t.jsx)(A.Ql,{value:"circle",children:"空心圆点"}),(0,t.jsx)(A.Ql,{value:"square",children:"方块"}),(0,t.jsx)(A.Ql,{value:"decimal",children:"数字"})]})]})]}),(0,t.jsx)(k,{value:o.props.fontSize||"14px",onChange:e=>f("fontSize",e),min:10,max:24})]});case"card":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"卡片标题"}),(0,t.jsx)(n.I,{value:o.props.title||"",onChange:e=>f("title",e.target.value),placeholder:"请输入卡片标题",className:"h-10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"卡片内容"}),(0,t.jsx)(L.g,{value:o.props.content||"",onChange:e=>f("content",e.target.value),placeholder:"请输入卡片内容",rows:3,className:"resize-none"})]}),(0,t.jsx)(w,{label:"背景颜色",value:o.props.backgroundColor||"#ffffff",onChange:e=>f("backgroundColor",e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{className:"text-sm text-gray-700 mb-2 block",children:"阴影大小"}),(0,t.jsxs)(A.Ph,{value:o.props.shadow||"sm",onValueChange:e=>f("shadow",e),children:[(0,t.jsx)(A.i4,{children:(0,t.jsx)(A.ki,{placeholder:"选择阴影大小"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"none",children:"无阴影"}),(0,t.jsx)(A.Ql,{value:"sm",children:"小阴影"}),(0,t.jsx)(A.Ql,{value:"md",children:"中阴影"}),(0,t.jsx)(A.Ql,{value:"lg",children:"大阴影"})]})]})]})]});default:return(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(eo.Z,{className:"w-6 h-6 text-gray-400"})}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"该组件暂无可配置属性"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["组件类型: ",o.type]})]})}})()})]})]}),(0,t.jsx)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("p",{className:"text-xs text-blue-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCA1"}),"按 ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-white border rounded text-xs font-mono",children:"ESC"})," ","键可取消选中"]})})]})}),(0,t.jsx)(u,{value:"animations",className:"p-0",children:(0,t.jsx)(es,{})}),(0,t.jsx)(u,{value:"events",className:"p-0",children:(0,t.jsx)(ed,{})})]})})}var eu=a(9311),ep=a(5965),ev=a(4353),ej=a(3229),eg=a(9534),eb=a(8257);function ef(e){let{pageId:s}=e,{components:a,canUndo:n,canRedo:r,undo:i,redo:c}=(0,y.jE)(),{updatePage:d,getPageById:o,createPage:x}=(0,eu.u)(),{openPreview:h}=(0,eb.v)(),[m,u]=(0,l.useState)(!1),p=(0,eg.pm)();(0,l.useEffect)(()=>{u(!0)},[]);let v=e=>e.map(e=>({...e,type:e.type})),j=()=>{if(!s)return{success:!1,title:"无法保存",description:"缺少页面ID，请从首页选择要编辑的页面"};try{let e=o(s);if(e)return d(s,{components:v(a),updatedAt:new Date}),{success:!0,title:"页面更新成功",description:"已保存 ".concat(a.length,' 个组件到页面 "').concat(e.name,'"')};{let e=x("页面-".concat(s.slice(-8)),"未命名页面-".concat(s.slice(-8)),"通过编辑器创建的页面");return d(e.id,{components:v(a),updatedAt:new Date}),{success:!0,title:"新页面创建成功",description:'已创建页面 "'.concat(e.name,'" 并保存 ').concat(a.length," 个组件")}}}catch(e){return console.error("保存页面数据失败:",e),{success:!1,title:"保存失败",description:e instanceof Error?e.message:"未知错误，请重试"}}};return m?(0,t.jsxs)("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"H5 搭建-编辑器"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(C.z,{variant:"ghost",size:"sm",disabled:!n,onClick:n?i:void 0,title:"撤销 (Ctrl+Z)",className:"gap-1",children:[(0,t.jsx)(ep.Z,{className:"h-4 w-4"}),"撤销"]}),(0,t.jsxs)(C.z,{variant:"ghost",size:"sm",disabled:!r,onClick:r?c:void 0,title:"重做 (Ctrl+Y)",className:"gap-1",children:[(0,t.jsx)(ev.Z,{className:"h-4 w-4"}),"重做"]}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,t.jsxs)(C.z,{variant:"ghost",size:"sm",onClick:()=>{if(m)try{if(0===a.length){p.warning("无法预览","请先添加一些组件再预览");return}let e=j();if(!e.success){p.error(e.title,e.description);return}p.info("正在打开预览","".concat(e.description,"，预览窗口即将打开")),console.log("预览数据保存:",e.title),console.log("组件数量:",a.length),h(s||void 0)||p.error("无法打开预览窗口","请检查浏览器是否阻止了弹窗")}catch(e){console.error("预览失败:",e),p.error("预览失败",e instanceof Error?e.message:"未知错误，请重试")}},className:"gap-1",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),"预览"]}),(0,t.jsxs)(C.z,{onClick:()=>{if(m)try{let e=j();console.log("保存数据:",JSON.stringify(a,null,2)),console.log("组件数量:",a.length),e.success?p.success(e.title,e.description):p.error(e.title,e.description)}catch(e){console.error("保存失败:",e),p.error("保存失败",e instanceof Error?e.message:"未知错误，请重试")}},className:"gap-1",children:[(0,t.jsx)(ej.Z,{className:"h-4 w-4"}),"保存"]})]})]}):(0,t.jsxs)("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"H5 搭建-编辑器"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-20 bg-blue-200 rounded"})]})]})}var ey=a(1905),eN=a(401),ew=a(2489),ek=a(2207),eC=a(6337),eI=a(9589),ez=a(7769),eD=a(795),eZ=a(3662),eE=a(9892);function eS(e){var s,a;let{component:l,selectedId:r,editingId:i,editingName:c,setSelectedId:d,deleteComponent:o,updateComponent:x,duplicateComponent:h,startRename:m,saveRename:u,cancelRename:p,handleKeyDown:v,setEditingName:j}=e,{attributes:g,listeners:b,setNodeRef:f,transform:y,transition:N,isDragging:w}=(0,eZ.nB)({id:l.id}),k={transform:eE.ux.Transform.toString(y),transition:N,opacity:w?.5:1};return(0,t.jsxs)("div",{ref:f,style:k,className:"flex items-center p-2 rounded cursor-pointer hover:bg-gray-100 transition-colors ".concat(r===l.id?"bg-blue-50 border border-blue-200":""," ").concat(l.locked?"opacity-60 bg-orange-50":""),onClick:()=>d(l.id),children:[(0,t.jsx)("div",{...g,...b,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-gray-200 rounded mr-2",children:(0,t.jsx)(ey.Z,{className:"h-3 w-3 text-gray-400"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:i===l.id?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(n.I,{value:c,onChange:e=>j(e.target.value),onKeyDown:v,className:"h-6 text-sm px-2",autoFocus:!0,onClick:e=>e.stopPropagation()}),(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-green-600 hover:text-green-700",onClick:e=>{e.stopPropagation(),u()},children:(0,t.jsx)(eN.Z,{className:"h-3 w-3"})}),(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-500 hover:text-gray-700",onClick:e=>{e.stopPropagation(),p()},children:(0,t.jsx)(ew.Z,{className:"h-3 w-3"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-sm font-medium overflow-hidden whitespace-nowrap text-ellipsis text-gray-800",children:l.name||l.type}),(0,t.jsx)("div",{className:"text-xs text-gray-500 overflow-hidden whitespace-nowrap text-ellipsis",children:l.id})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-end justify-center gap-1 ml-2",children:[i!==l.id&&(0,t.jsxs)("div",{children:[(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 transition-colors",disabled:l.locked,onClick:e=>{e.stopPropagation(),m(l)},title:"重命名",children:(0,t.jsx)(ek.Z,{className:"h-3 w-3"})}),(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 transition-colors",disabled:l.locked,onClick:e=>{e.stopPropagation(),h(l.id)},title:"复制组件",children:(0,t.jsx)(I.Z,{className:"h-3 w-3"})}),(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 transition-colors ".concat(l.locked?"text-orange-600":""),onClick:e=>{e.stopPropagation(),x(l.id,{locked:!l.locked})},title:l.locked?"解锁组件":"锁定组件",children:l.locked?(0,t.jsx)(eC.Z,{className:"h-3 w-3"}):(0,t.jsx)(eI.Z,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 transition-colors",disabled:l.locked,onClick:e=>{var s;e.stopPropagation();let a=(null===(s=l.style)||void 0===s?void 0:s.display)==="none";x(l.id,{style:{...l.style,display:a?"block":"none"}})},title:(null===(s=l.style)||void 0===s?void 0:s.display)==="none"?"显示组件":"隐藏组件",children:(null===(a=l.style)||void 0===a?void 0:a.display)==="none"?(0,t.jsx)(ez.Z,{className:"h-3 w-3 text-gray-400"}):(0,t.jsx)(K.Z,{className:"h-3 w-3"})}),(0,t.jsx)(C.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors",disabled:l.locked,onClick:e=>{e.stopPropagation(),o(l.id)},children:(0,t.jsx)(z.Z,{className:"h-3 w-3"})})]})]})]})}function eP(){let{components:e,selectedId:s,setSelectedId:a,deleteComponent:n,updateComponent:r,duplicateComponent:i,reorderComponents:d}=(0,y.jE)(),[o,x]=(0,l.useState)(null),[h,m]=(0,l.useState)(""),u=e=>{x(e.id),m(e.name||e.type)},p=()=>{o&&h.trim()&&r(o,{name:h.trim()}),x(null),m("")},v=()=>{x(null),m("")},j=e=>{"Enter"===e.key?p():"Escape"===e.key&&v()},g=(0,eD.Dy)((0,eD.VT)(eD.we),(0,eD.VT)(eD.Lg,{coordinateGetter:eZ.is}));return(0,t.jsxs)("div",{className:"border-t border-gray-200 flex-1 flex flex-col bg-gray-50",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"图层面板"})}),(0,t.jsx)(c,{className:"flex-1",children:(0,t.jsx)("div",{className:"p-2",children:0===e.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"暂无图层"}):(0,t.jsx)(eD.LB,{sensors:g,collisionDetection:eD.pE,onDragEnd:s=>{let{active:a,over:t}=s;a.id!==(null==t?void 0:t.id)&&d(e.findIndex(e=>e.id===a.id),e.findIndex(e=>e.id===(null==t?void 0:t.id)))},children:(0,t.jsx)(eZ.Fo,{items:e.map(e=>e.id),strategy:eZ.qw,children:(0,t.jsx)("div",{className:"space-y-1",children:e.map(e=>(0,t.jsx)(eS,{component:e,selectedId:s,editingId:o,editingName:h,setSelectedId:a,deleteComponent:n,updateComponent:r,duplicateComponent:i,startRename:u,saveRename:p,cancelRename:v,handleKeyDown:j,setEditingName:m},e.id))})})})})})]})}var eV=a(9376);let e_=()=>(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded"})]}),eQ=()=>{let{goToHomePage:e}=(0,eb.v)();return(0,t.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto text-center p-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"需要选择页面才能开始编辑"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"请从首页选择要编辑的页面，或者创建一个新页面开始您的设计之旅"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:e,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"返回首页"}),(0,t.jsx)("button",{onClick:e,className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"创建新页面"})]}),(0,t.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 提示"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"编辑器需要与具体页面关联才能正常工作，这样可以确保您的设计内容得到妥善保存"})]})]})})},eM=e=>{let{isLoading:s,pageId:a}=e;return s||a?(0,t.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[s?(0,t.jsxs)("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"H5 搭建-编辑器"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"animate-pulse h-8 w-20 bg-blue-200 rounded"})]})]}):(0,t.jsx)(ef,{pageId:a}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsx)("div",{className:"".concat("min-w-80 max-w-80 flex-shrink-0 bg-white border-r border-gray-200"," ").concat(s?"":"flex flex-col overflow-hidden"),children:s?(0,t.jsx)(e_,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{}),(0,t.jsx)(eP,{})]})}),(0,t.jsx)("div",{className:"flex-1 flex justify-center bg-gray-100 overflow-y-auto overflow-x-hidden",children:s?(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse text-gray-400",children:"初始化中..."})}):(0,t.jsx)(_,{})}),(0,t.jsx)("div",{className:"".concat("min-w-90 max-w-90 flex-shrink-0 bg-white border-l border-gray-200"," ").concat(s?"":"overflow-hidden"),children:s?(0,t.jsx)(e_,{}):(0,t.jsx)(em,{})})]})]}):(0,t.jsx)(eQ,{})};function eL(){let{clearSelection:e,undo:s,redo:a,canUndo:n,canRedo:r,saveToHistory:i,setComponents:c}=(0,y.jE)(),{getPageById:d}=(0,eu.u)(),o=(0,eV.useSearchParams)().get("pageId"),[x,h]=(0,l.useState)(!1),m=(0,l.useRef)(!1),u=(0,l.useRef)(!1);(0,l.useEffect)(()=>{h(!0)},[]);let p=(0,l.useCallback)(()=>{try{if(!o){console.log("缺少 pageId 参数，无法编辑"),c([]);return}console.log("正在加载页面数据，pageId:",o);let e=d(o);e&&e.components?(console.log("从页面存储加载数据"),c(e.components)):(console.log("页面不存在或无组件数据，使用空状态"),c([]))}catch(e){console.error("加载初始数据失败:",e),c([])}},[o,d,c]);return(0,l.useEffect)(()=>{x&&(m.current=!1,u.current=!0,p())},[x,o,p]),(0,l.useEffect)(()=>{x&&!m.current&&u.current&&(m.current=!0,setTimeout(()=>{i()},100))},[x,i,u.current]),(0,l.useEffect)(()=>{let t=t=>{if("Escape"===t.key){e();return}if(t.ctrlKey||t.metaKey){if("z"===t.key&&!t.shiftKey&&n){t.preventDefault(),s();return}if(("y"===t.key||"z"===t.key&&t.shiftKey)&&r){t.preventDefault(),a();return}}};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,s,a,n,r]),(0,t.jsx)(eM,{isLoading:!x,pageId:o})}let eT=()=>(0,t.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"加载编辑器中..."})]})});function eB(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(eT,{}),children:(0,t.jsx)(eL,{})})}}},function(e){e.O(0,[518,858,299,713,322,508,284,240,971,117,744],function(){return e(e.s=5181)}),_N_E=e.O()}]);