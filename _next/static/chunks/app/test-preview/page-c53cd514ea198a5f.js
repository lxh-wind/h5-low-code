(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{14392:(e,s,t)=>{Promise.resolve().then(t.bind(t,92631))},85996:(e,s,t)=>{"use strict";t.d(s,{o:()=>b,M:()=>g});var r=t(95155),a=t(10068),i=t(82502),n=t(61827),l=t(82727),d=t(89613),c=t(93654),o=t(48932),x=t(92657),p=t(4229),m=t(48587),h=t(12115);function g(){let[e,s]=(0,h.useState)(!1),t=(0,n.dj)(),{canUndo:g,canRedo:f,undo:b,redo:y,precompileStyles:j}=(0,a.U)(),u=(0,l.g0)(),N=async()=>{try{t.loading("正在准备预览..."),j(),await new Promise(e=>setTimeout(e,800)),window.location.href="/preview"}catch(e){t.error("预览失败"),console.error("预览失败:",e)}};return(0,r.jsxs)(d.Kq,{children:[(0,r.jsxs)("div",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"H5 Low Code Editor"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"未命名项目"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.sM,{showTooltip:!0}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("button",{onClick:b,disabled:!g(),className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"撤销"]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["撤销 (Ctrl+Z)",(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]}),(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("button",{onClick:y,disabled:!f(),className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"重做"]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["重做 (Ctrl+Y)",(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("button",{onClick:N,className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"预览"]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["预览页面",(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("button",{onClick:()=>{t.success("项目已保存")},className:"inline-flex items-center justify-center px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"保存"]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["保存项目",(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]}),(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("button",{onClick:()=>{try{if(!u)return void t.error("没有可导出的页面");s(!0)}catch(e){t.error("JSON 预览失败"),console.error("JSON 预览失败:",e)}},className:"inline-flex items-center justify-center px-4 py-2 text-sm bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"导出"]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["预览并导出 JSON Schema",(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})]})]}),(0,r.jsx)(n.zZ,{open:e,onOpenChange:s,page:u,title:"JSON Schema 预览"})]})}var f=t(66766);function b(e){let{component:s,pageConfig:t}=e,{className:a}=s,{type:i,style:n}=s,l={};n&&Object.entries(n).forEach(e=>{let[s,t]=e;t&&(l[s]=t)});let d={};t&&(!l.fontFamily&&t.fontFamily&&(d.fontFamily=t.fontFamily),!l.fontSize&&t.fontSize&&(d.fontSize=t.fontSize),!l.lineHeight&&t.lineHeight&&(d.lineHeight=t.lineHeight),!l.color&&t.color&&(d.color=t.color));let c={...d,...l,boxSizing:"border-box"};switch(i){case"text":return(0,r.jsx)("span",{className:a,style:c,children:s.props.text||"文本内容"});case"button":return(0,r.jsx)("button",{className:"".concat(a," ").concat(a?"":"px-4 py-2 rounded hover:opacity-80 disabled:opacity-50"),style:c,disabled:s.props.disabled,children:s.props.text||"按钮"});case"image":return(0,r.jsx)(f.default,{style:c,src:s.props.src||"https://via.placeholder.com/200x150?text=图片",alt:s.props.alt||"图片",width:200,height:150},s.id);case"input":return(0,r.jsx)("input",{className:"".concat(a," ").concat(a?"":"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"),style:c,type:s.props.type||"text",placeholder:s.props.placeholder||"请输入内容",readOnly:!0});case"container":return(0,r.jsx)("div",{className:"".concat(a," ").concat(a?"":"min-h-[50px]"),style:c,children:s.children&&s.children.length>0?s.children.map(e=>(0,r.jsx)(b,{component:e,pageConfig:t},e.id)):(0,r.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空容器"})});case"list":return(0,r.jsx)("div",{className:a,style:c,children:s.children&&s.children.length>0?s.children.map(e=>(0,r.jsx)(b,{component:e,pageConfig:t},e.id)):(0,r.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空列表"})});case"card":return(0,r.jsx)("div",{className:"".concat(a," ").concat(a?"":"bg-white rounded-lg shadow border"),style:c,children:s.children&&s.children.length>0?s.children.map(e=>(0,r.jsx)(b,{component:e,pageConfig:t},e.id)):(0,r.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空卡片"})});case"divider":return(0,r.jsx)("div",{className:"".concat(a," ").concat(a?"":"border-t border-gray-300"),style:c});case"space":return(0,r.jsx)("div",{className:a,style:c});default:return(0,r.jsxs)("div",{className:a,style:c,children:["未知组件类型: ",i]})}}},92631:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(95155),a=t(85996),i=t(53999);function n(){let e=[{id:"test_1",type:"text",name:"测试文本",props:{text:"这是一个测试文本"},style:{fontSize:"24px",fontWeight:"bold",color:"#ff0000",textAlign:"center",paddingTop:"20px",paddingBottom:"20px",marginTop:"10px",marginBottom:"10px"},className:(0,i.TU)({fontSize:"24px",fontWeight:"bold",color:"#ff0000",textAlign:"center",paddingTop:"20px",paddingBottom:"20px",marginTop:"10px",marginBottom:"10px"})},{id:"test_2",type:"button",name:"测试按钮",props:{text:"点击我"},style:{backgroundColor:"#1890ff",color:"#ffffff",paddingTop:"12px",paddingBottom:"12px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"6px",fontSize:"16px",marginTop:"20px",marginBottom:"20px",display:"block",width:"200px"},className:(0,i.TU)({backgroundColor:"#1890ff",color:"#ffffff",paddingTop:"12px",paddingBottom:"12px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"6px",fontSize:"16px",marginTop:"20px",marginBottom:"20px",display:"block",width:"200px"})},{id:"test_3",type:"text",name:"无className测试",props:{text:"这个组件没有预编译className，应该使用fallback样式"},style:{fontSize:"18px",color:"#00ff00",paddingTop:"15px",paddingBottom:"15px",backgroundColor:"#f0f0f0",borderRadius:"8px",textAlign:"center"}}];return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"预览渲染器测试"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"测试组件信息"}),e.map((e,s)=>(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["组件 ",s+1,": ",e.name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,r.jsx)("strong",{children:"原始样式:"})," ",JSON.stringify(e.style)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,r.jsx)("strong",{children:"TailwindCSS类名:"})," ",e.className||"无"]})]},e.id))]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"渲染结果"}),(0,r.jsx)("div",{className:"space-y-4 border-2 border-dashed border-gray-300 p-4 rounded",children:e.map(e=>(0,r.jsx)("div",{className:"border border-gray-200 p-2 rounded",children:(0,r.jsx)(a.o,{component:e})},e.id))})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[277,861,407,858,999,18,827,502,441,684,358],()=>s(14392)),_N_E=e.O()}]);