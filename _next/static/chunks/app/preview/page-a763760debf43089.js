(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{24653:(e,l,n)=>{Promise.resolve().then(n.bind(n,99727))},99727:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>x});var s=n(95155),i=n(12115),t=n(35695),a=n(10068),r=n(48956),c=n(85996),o=n(82502);let d=(0,n(19946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function u(){var e,l,n,u,m,x,f,h,g,p;let v=(0,t.useRouter)(),b=(0,t.useSearchParams)().get("pageId"),[j,y]=(0,i.useState)(!0),[N,w]=(0,i.useState)(null),{components:k,precompileStyles:C}=(0,a.U)(),{getPageById:H}=(0,r.s)();return((0,i.useEffect)(()=>{(async()=>{try{if(y(!0),b){let e=H(b);if(!e)return void v.push("/");w(e)}C(),await new Promise(e=>requestAnimationFrame(e))}catch(e){console.error("预览初始化失败:",e)}finally{y(!1)}})()},[b,C,H,v]),j)?(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"正在加载预览..."})]})}):(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-gray-100",children:[(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>{b?v.push("/editor?pageId=".concat(b)):v.push("/editor")},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)(d,{className:"h-4 w-4 mr-2"}),"返回编辑器"]}),(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"预览模式"})]}),(0,s.jsx)(o.sM,{showIcon:!0})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(o.Mj,{title:(null==N?void 0:N.title)||"H5 页面预览",maxHeight:"calc(100vh - 200px)",children:0===((null==N?void 0:N.components)||k).length?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCF1"}),(0,s.jsx)("p",{className:"text-lg",children:"暂无内容"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"请返回编辑器添加组件"})]}):(0,s.jsx)("div",{style:{backgroundColor:(null==N||null==(e=N.config)?void 0:e.backgroundColor)||"#ffffff",color:(null==N||null==(l=N.config)?void 0:l.color)||"#333333",fontFamily:(null==N||null==(n=N.config)?void 0:n.fontFamily)||"system-ui, -apple-system, sans-serif",fontSize:(null==N||null==(u=N.config)?void 0:u.fontSize)||"14px",lineHeight:(null==N||null==(m=N.config)?void 0:m.lineHeight)||"1.6",minHeight:(null==N||null==(x=N.config)?void 0:x.minHeight)||"auto",padding:(null==N||null==(f=N.config)?void 0:f.padding)||"16px",maxWidth:(null==N||null==(h=N.config)?void 0:h.maxWidth)||"none",marginLeft:(null==N||null==(g=N.config)?void 0:g.maxWidth)?"auto":"initial",marginRight:(null==N||null==(p=N.config)?void 0:p.maxWidth)?"auto":"initial"},className:"space-y-2",children:((null==N?void 0:N.components)||k).map(e=>(0,s.jsx)(c.o,{component:e,pageConfig:null==N?void 0:N.config},e.id))})})})})]})}function m(){return(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"正在加载预览..."})]})})}function x(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)(m,{}),children:(0,s.jsx)(u,{})})}}},e=>{var l=l=>e(e.s=l);e.O(0,[277,861,407,858,999,18,827,502,996,441,684,358],()=>l(24653)),_N_E=e.O()}]);