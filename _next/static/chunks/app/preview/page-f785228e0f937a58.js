(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{4653:(e,t,n)=>{Promise.resolve().then(n.bind(n,9727))},5695:(e,t,n)=>{"use strict";var l=n(8999);n.o(l,"useRouter")&&n.d(t,{useRouter:function(){return l.useRouter}}),n.o(l,"useSearchParams")&&n.d(t,{useSearchParams:function(){return l.useSearchParams}})},8956:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var l=n(8693),s=n(6786);let a=()=>"page_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),i=(0,l.vt)()((0,s.Zr)((e,t)=>({pages:[],createPage:(n,l,s)=>{let{pages:i}=t(),r={id:a(),name:n,title:l,description:s,components:[],createdAt:new Date,updatedAt:new Date};return e({pages:[...i,r]}),r},updatePage:(n,l)=>{let{pages:s}=t();e({pages:s.map(e=>e.id===n?{...e,...l,updatedAt:new Date}:e)})},deletePage:n=>{let{pages:l}=t();e({pages:l.filter(e=>e.id!==n)})},getPageById:e=>{let{pages:n}=t();return n.find(t=>t.id===e)||null},duplicatePage:n=>{let{pages:l}=t(),s=l.find(e=>e.id===n);if(!s)return null;let i={...s,id:a(),name:"".concat(s.name," 副本"),title:"".concat(s.title," 副本"),createdAt:new Date,updatedAt:new Date};return e({pages:[...l,i]}),i},generatePageId:a}),{name:"pages-storage",version:1}))},9727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var l=n(5155),s=n(2115),a=n(5695),i=n(68),r=n(8956),c=n(1184),o=n(2502);let d=(0,n(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function u(){var e,t,n,u,m,f,g,x,h,p;let v=(0,a.useRouter)(),b=(0,a.useSearchParams)().get("pageId"),[j,y]=(0,s.useState)(!0),[N,w]=(0,s.useState)(null),{components:P,precompileStyles:k}=(0,i.U)(),{getPageById:S}=(0,r.s)();return((0,s.useEffect)(()=>{(async()=>{try{if(y(!0),b){let e=S(b);if(!e)return void v.push("/");w(e)}k(),await new Promise(e=>requestAnimationFrame(e))}catch(e){console.error("预览初始化失败:",e)}finally{y(!1)}})()},[b,k,S,v]),j)?(0,l.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"正在加载预览..."})]})}):(0,l.jsxs)("div",{className:"h-screen flex flex-col bg-gray-100",children:[(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("button",{onClick:()=>{b?v.push("/editor?pageId=".concat(b)):v.push("/editor")},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)(d,{className:"h-4 w-4 mr-2"}),"返回编辑器"]}),(0,l.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"预览模式"})]}),(0,l.jsx)(o.sM,{showIcon:!0})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(o.Mj,{title:(null==N?void 0:N.title)||"H5 页面预览",maxHeight:"calc(100vh - 200px)",children:0===((null==N?void 0:N.components)||P).length?(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCF1"}),(0,l.jsx)("p",{className:"text-lg",children:"暂无内容"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"请返回编辑器添加组件"})]}):(0,l.jsx)("div",{style:{backgroundColor:(null==N||null==(e=N.config)?void 0:e.backgroundColor)||"#ffffff",color:(null==N||null==(t=N.config)?void 0:t.color)||"#333333",fontFamily:(null==N||null==(n=N.config)?void 0:n.fontFamily)||"system-ui, -apple-system, sans-serif",fontSize:(null==N||null==(u=N.config)?void 0:u.fontSize)||"14px",lineHeight:(null==N||null==(m=N.config)?void 0:m.lineHeight)||"1.6",minHeight:(null==N||null==(f=N.config)?void 0:f.minHeight)||"auto",padding:(null==N||null==(g=N.config)?void 0:g.padding)||"16px",maxWidth:(null==N||null==(x=N.config)?void 0:x.maxWidth)||"none",marginLeft:(null==N||null==(h=N.config)?void 0:h.maxWidth)?"auto":"initial",marginRight:(null==N||null==(p=N.config)?void 0:p.maxWidth)?"auto":"initial"},className:"space-y-2",children:((null==N?void 0:N.components)||P).map(e=>(0,l.jsx)(c.o,{component:e,pageConfig:null==N?void 0:N.config},e.id))})})})})]})}function m(){return(0,l.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"正在加载预览..."})]})})}function f(){return(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)(m,{}),children:(0,l.jsx)(u,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,679,898,714,999,502,184,441,684,358],()=>t(4653)),_N_E=e.O()}]);