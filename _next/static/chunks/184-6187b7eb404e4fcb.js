"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{1184:(e,t,s)=>{s.d(t,{o:()=>y,M:()=>b});var a=s(5155),c=s(68),n=s(2502),r=s(9613),i=s(6621),l=s(3654),o=s(8932),d=s(2657),x=s(4229),h=s(1788),p=s(646),m=s(4861),u=s(4631),g=s(2115);function b(){let[e,t]=(0,g.useState)([]),{canUndo:s,canRedo:b,undo:j,redo:y,components:f,precompileStyles:w}=(0,c.U)(),N=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=Date.now().toString();return t(t=>[...t,{id:a,title:e,type:s}]),a},v=e=>{t(t=>t.filter(t=>t.id!==e))},k=async()=>{try{let e=N("正在准备预览...","loading");w(),await new Promise(e=>setTimeout(e,800)),v(e),window.location.href="/preview"}catch(e){N("预览失败","error"),console.error("预览失败:",e)}};return(0,a.jsxs)(i.Kq,{swipeDirection:"right",children:[(0,a.jsx)(r.Kq,{children:(0,a.jsxs)("div",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"H5 Low Code Editor"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"未命名项目"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.sM,{showTooltip:!0}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,a.jsxs)(r.bL,{children:[(0,a.jsx)(r.l9,{asChild:!0,children:(0,a.jsxs)("button",{onClick:j,disabled:!s(),className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"撤销"]})}),(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["撤销 (Ctrl+Z)",(0,a.jsx)(r.i3,{className:"fill-gray-900"})]})})]}),(0,a.jsxs)(r.bL,{children:[(0,a.jsx)(r.l9,{asChild:!0,children:(0,a.jsxs)("button",{onClick:y,disabled:!b(),className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"重做"]})}),(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["重做 (Ctrl+Y)",(0,a.jsx)(r.i3,{className:"fill-gray-900"})]})})]}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,a.jsxs)(r.bL,{children:[(0,a.jsx)(r.l9,{asChild:!0,children:(0,a.jsxs)("button",{onClick:k,className:"inline-flex items-center justify-center px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"预览"]})}),(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["预览页面",(0,a.jsx)(r.i3,{className:"fill-gray-900"})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(r.bL,{children:[(0,a.jsx)(r.l9,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>{N("项目已保存","success")},className:"inline-flex items-center justify-center px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"保存"]})}),(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["保存项目",(0,a.jsx)(r.i3,{className:"fill-gray-900"})]})})]}),(0,a.jsxs)(r.bL,{children:[(0,a.jsx)(r.l9,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>{try{let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GeneratedPage",s=e.map(e=>(function e(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{type:a,props:c,style:n,children:r}=t,i="  ".repeat(s),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return Object.entries(e).forEach(e=>{let[s,a]=e;if(a&&"0"!==a)switch(s){case"marginTop":t.push((a.includes("px"),"mt-[".concat(a,"]")));break;case"marginRight":t.push((a.includes("px"),"mr-[".concat(a,"]")));break;case"marginBottom":t.push((a.includes("px"),"mb-[".concat(a,"]")));break;case"marginLeft":t.push((a.includes("px"),"ml-[".concat(a,"]")));break;case"paddingTop":t.push((a.includes("px"),"pt-[".concat(a,"]")));break;case"paddingRight":t.push((a.includes("px"),"pr-[".concat(a,"]")));break;case"paddingBottom":t.push((a.includes("px"),"pb-[".concat(a,"]")));break;case"paddingLeft":t.push((a.includes("px"),"pl-[".concat(a,"]")));break;case"width":"100%"===a?t.push("w-full"):t.push("w-[".concat(a,"]"));break;case"height":"100%"===a?t.push("h-full"):t.push("h-[".concat(a,"]"));break;case"color":case"fontSize":t.push("text-[".concat(a,"]"));break;case"backgroundColor":t.push("bg-[".concat(a,"]"));break;case"fontWeight":"bold"===a?t.push("font-bold"):"normal"===a?t.push("font-normal"):t.push("font-[".concat(a,"]"))}}),t.join(" ")}(n),o=[{text:"transition-all duration-200",button:"px-4 py-2 rounded transition-all hover:opacity-80",image:"block object-cover",input:"px-3 py-2 border rounded focus:outline-none focus:ring-2",container:"min-h-[50px]",card:"bg-white rounded-lg shadow border"}[a]||"",l].filter(Boolean).join(" "),d=o?' className="'.concat(o,'"'):"";switch(a){case"text":return"".concat(i,"<div").concat(d,">").concat(c.text||"文本内容","</div>");case"button":return"".concat(i,"<button").concat(d,">").concat(c.text||"按钮","</button>");case"image":return"".concat(i,"<img").concat(d,' src="').concat(c.src||"",'" alt="').concat(c.alt||"图片",'" />');case"input":return"".concat(i,"<input").concat(d,' type="').concat(c.type||"text",'" placeholder="').concat(c.placeholder||"",'" />');default:{let t="";return r&&r.length>0&&(t="\n"+r.map(t=>e(t,s+1)).join("\n")+"\n"+i),"".concat(i,"<div").concat(d,">").concat(t,"</div>")}}})(e,2)).join("\n");return"import React from 'react'\n\nexport default function ".concat(t,'() {\n  return (\n    <div className="min-h-screen bg-gray-50 p-4">\n      <div className="max-w-md mx-auto bg-white rounded-lg shadow-lg overflow-hidden">\n').concat(s,"\n      </div>\n    </div>\n  )\n}")}(f,"H5Page"),t=new Blob([e],{type:"text/javascript"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="H5Page.tsx",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),N("代码导出成功","success")}catch(e){N("代码导出失败","error"),console.error("导出代码失败:",e)}},className:"inline-flex items-center justify-center px-4 py-2 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"导出"]})}),(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["导出代码",(0,a.jsx)(r.i3,{className:"fill-gray-900"})]})})]})]})]})}),e.map(e=>(0,a.jsxs)(i.bL,{className:"bg-white rounded-md shadow-lg border p-4 grid grid-cols-[auto_max-content] gap-x-4 items-center data-[state=open]:animate-slideIn data-[state=closed]:animate-hide data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform_200ms_ease-out] data-[swipe=end]:animate-swipeOut",onOpenChange:t=>{t||v(e.id)},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.type?(0,a.jsx)(p.A,{className:"h-5 w-5 text-green-500"}):"error"===e.type?(0,a.jsx)(m.A,{className:"h-5 w-5 text-red-500"}):(0,a.jsx)(u.A,{className:"h-5 w-5 text-blue-500 animate-spin"}),(0,a.jsx)(i.hE,{className:"text-sm font-medium text-gray-900",children:e.title})]}),(0,a.jsx)(i.bm,{className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]},e.id)),(0,a.jsx)(i.LM,{className:"fixed top-20 left-1/2 transform -translate-x-1/2 flex flex-col p-6 gap-2 w-96 max-w-[100vw] m-0 list-none z-50 outline-none"})]})}var j=s(6766);function y(e){let{component:t}=e,{className:s}=t,{type:c,style:n}=t,r={};n&&Object.entries(n).forEach(e=>{let[t,s]=e;s&&(r[t]=s)});let i={...r,boxSizing:"border-box"};switch(c){case"text":return(0,a.jsx)("span",{className:s,style:i,children:t.props.text||"文本内容"});case"button":return(0,a.jsx)("button",{className:"".concat(s," ").concat(s?"":"px-4 py-2 rounded hover:opacity-80 disabled:opacity-50"),style:i,disabled:t.props.disabled,children:t.props.text||"按钮"});case"image":return(0,a.jsx)(j.default,{style:i,src:t.props.src||"https://via.placeholder.com/200x150?text=图片",alt:t.props.alt||"图片",width:200,height:150},t.id);case"input":return(0,a.jsx)("input",{className:"".concat(s," ").concat(s?"":"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"),style:i,type:t.props.type||"text",placeholder:t.props.placeholder||"请输入内容",readOnly:!0});case"container":return(0,a.jsx)("div",{className:"".concat(s," ").concat(s?"":"min-h-[50px]"),style:i,children:t.children&&t.children.length>0?t.children.map(e=>(0,a.jsx)(y,{component:e},e.id)):(0,a.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空容器"})});case"list":return(0,a.jsx)("div",{className:s,style:i,children:t.children&&t.children.length>0?t.children.map(e=>(0,a.jsx)(y,{component:e},e.id)):(0,a.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空列表"})});case"card":return(0,a.jsx)("div",{className:"".concat(s," ").concat(s?"":"bg-white rounded-lg shadow border"),style:i,children:t.children&&t.children.length>0?t.children.map(e=>(0,a.jsx)(y,{component:e},e.id)):(0,a.jsx)("div",{className:"text-gray-400 text-sm p-4 text-center",children:"空卡片"})});case"divider":return(0,a.jsx)("div",{className:"".concat(s," ").concat(s?"":"border-t border-gray-300"),style:i});case"space":return(0,a.jsx)("div",{className:s,style:i});default:return(0,a.jsxs)("div",{className:s,style:i,children:["未知组件类型: ",c]})}}}}]);