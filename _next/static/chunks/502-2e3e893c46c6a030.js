"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{68:(e,t,n)=>{n.d(t,{R:()=>l,U:()=>o});var s=n(8693),r=n(6786),i=n(3999);class a{buildTree(e){this.nodes.clear(),this.rootNodes=[],e.forEach(e=>{var t;let n={id:e.id,type:e.type,name:e.name,component:e,children:[],depth:0,isVisible:!0,isExpanded:null==(t=this.expandedState.get(e.id))||t};this.nodes.set(e.id,n)}),e.forEach(e=>{let t=this.nodes.get(e.id);if(e.parentId){let n=this.nodes.get(e.parentId);n&&(t.parent=n,t.depth=n.depth+1,n.children.push(t))}else this.rootNodes.push(t)}),this.updateVisibility()}updateVisibility(){let e=t=>{var n;let s=!t.parent||t.parent.isVisible&&t.parent.isExpanded,r=!(null==(n=t.component.style)?void 0:n.display)||"none"!==t.component.style.display;t.isVisible=s&&r,t.children.forEach(e)};this.rootNodes.forEach(e)}getRootNodes(){return this.rootNodes}getNode(e){return this.nodes.get(e)}getVisibleNodes(){let e=[],t=n=>{n.forEach(n=>{n.isVisible&&(e.push(n),n.isExpanded&&t(n.children))})};return t(this.rootNodes),e}moveNode(e,t,n){let s=this.nodes.get(e),r=this.nodes.get(t);if(!s||!r||this.isDescendant(s,r))return this.toComponentArray();switch(this.removeNodeFromParent(s),n){case"inside":s.parent=r,s.depth=r.depth+1,r.children.push(s);break;case"before":case"after":{let e=r.parent,t=e?e.children:this.rootNodes,i=t.indexOf(r);s.parent=e,s.depth=e?e.depth+1:0,t.splice("before"===n?i:i+1,0,s)}}return this.updateVisibility(),this.toComponentArray()}toggleExpanded(e){let t=this.nodes.get(e);t&&(t.isExpanded=!t.isExpanded,this.expandedState.set(e,t.isExpanded),this.updateVisibility())}getExpandedState(){return new Map(this.expandedState)}deleteNode(e){let t=this.nodes.get(e);return t&&(this.removeNodeFromParent(t),this.removeNodeFromMap(t)),this.toComponentArray()}removeNodeFromParent(e){if(e.parent){let t=e.parent.children.indexOf(e);t>-1&&e.parent.children.splice(t,1)}else{let t=this.rootNodes.indexOf(e);t>-1&&this.rootNodes.splice(t,1)}}removeNodeFromMap(e){this.nodes.delete(e.id),e.children.forEach(e=>this.removeNodeFromMap(e))}isDescendant(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}toComponentArray(){let e=[],t=n=>{n.forEach(n=>{var s;let r={...n.component,parentId:null==(s=n.parent)?void 0:s.id};e.push(r),t(n.children)})};return t(this.rootNodes),e}updateComponent(e,t){let n=this.nodes.get(e);return n&&(n.component={...n.component,...t},t.style&&this.updateVisibility()),this.toComponentArray()}constructor(e,t){this.nodes=new Map,this.rootNodes=[],this.expandedState=new Map,t&&(this.expandedState=new Map(t)),this.buildTree(e)}}let l=[{id:"iphone14pro",name:"iPhone 14 Pro",width:393,height:852,safeAreaTop:59,safeAreaBottom:34,hasNotch:!0},{id:"iphone14",name:"iPhone 14",width:390,height:844,safeAreaTop:47,safeAreaBottom:34,hasNotch:!0},{id:"iphonese",name:"iPhone SE",width:375,height:667,safeAreaTop:20,safeAreaBottom:0,hasNotch:!1},{id:"xiaomi13",name:"小米 13",width:393,height:851,safeAreaTop:47,safeAreaBottom:24,hasNotch:!0},{id:"huaweip60",name:"华为 P60",width:393,height:852,safeAreaTop:44,safeAreaBottom:24,hasNotch:!0}],o=(0,s.vt)()((0,r.eh)((e,t)=>({currentProject:null,currentPage:null,treeManager:null,components:[],selectedComponentId:null,hoveredComponentId:null,history:[[]],historyIndex:0,isDragging:!1,previewMode:!1,currentDevice:l[1],setCurrentProject:t=>e({currentProject:t}),setCurrentPage:t=>{let n=new a(t.components);e({currentPage:t,components:t.components,treeManager:n,selectedComponentId:null,hoveredComponentId:null})},updatePageConfig:n=>{let{currentPage:s}=t();s&&e({currentPage:{...s,config:{...s.config,...n},updatedAt:new Date}})},updatePageSEO:n=>{let{currentPage:s}=t();s&&e({currentPage:{...s,seo:{...s.seo,...n},updatedAt:new Date}})},updatePageInfo:n=>{let{currentPage:s}=t();s&&e({currentPage:{...s,...n,updatedAt:new Date}})},setComponents:n=>{let s=new a(n);e({components:n,treeManager:s}),t().saveToHistory()},addComponent:(n,s,r)=>{let{components:i,generateUniqueId:l}=t(),o={...n,id:l(),parentId:s||void 0},d=[...i];if(s){let e=t=>t.map(t=>{if(t.id===s){let e=t.children||[],n=void 0!==r?r:e.length;return{...t,children:[...e.slice(0,n),o,...e.slice(n)]}}return t.children?{...t,children:e(t.children)}:t});d=e(d)}else{let e=void 0!==r?r:d.length;d=[...d.slice(0,e),o,...d.slice(e)]}let{treeManager:c}=t(),h=new a(d,null==c?void 0:c.getExpandedState());e({components:d,treeManager:h,selectedComponentId:o.id}),t().saveToHistory()},updateComponent:(n,s)=>{let{treeManager:r}=t();if(r){let i=r.updateComponent(n,s),l=new a(i,r.getExpandedState());e({components:i,treeManager:l}),t().saveToHistory()}else{let{components:r}=t(),i=e=>e.map(e=>e.id===n?{...e,...s}:e.children?{...e,children:i(e.children)}:e),l=i(r),{treeManager:o}=t(),d=new a(l,null==o?void 0:o.getExpandedState());e({components:l,treeManager:d}),t().saveToHistory()}},deleteComponent:n=>{let{treeManager:s}=t();if(s){let r=s.deleteNode(n),i=new a(r,s.getExpandedState());e({components:r,treeManager:i,selectedComponentId:null}),t().saveToHistory()}else{let{components:s}=t(),r=e=>e.filter(e=>e.id!==n).map(e=>({...e,children:e.children?r(e.children):void 0})),i=r(s),l=new a(i);e({components:i,treeManager:l,selectedComponentId:null}),t().saveToHistory()}},selectComponent:t=>e({selectedComponentId:t}),setHoveredComponent:t=>e({hoveredComponentId:t}),moveComponent:(n,s,r)=>{let{treeManager:i}=t();if(i){let l=i.moveNode(n,s,r),o=new a(l,i.getExpandedState());e({components:l,treeManager:o}),t().saveToHistory()}else{let{components:i}=t(),l=(e,t)=>{for(let n=0;n<e.length;n++){if(e[n].id===t)return{component:e[n],newComps:[...e.slice(0,n),...e.slice(n+1)]};if(e[n].children){let s=l(e[n].children||[],t);if(s.component){let t=[...e];return t[n]={...t[n],children:s.newComps},{component:s.component,newComps:t}}}}return{component:null,newComps:e}},o=(e,t,n,s)=>{for(let r=0;r<e.length;r++){if(e[r].id===t)if("inside"===s){let s=e[r].children||[];return[...e.slice(0,r),{...e[r],children:[...s,{...n,parentId:t}]},...e.slice(r+1)]}else if("before"===s)return[...e.slice(0,r),{...n,parentId:e[r].parentId},...e.slice(r)];else return[...e.slice(0,r+1),{...n,parentId:e[r].parentId},...e.slice(r+1)];if(e[r].children){let i=o(e[r].children||[],t,n,s);if(i!==e[r].children)return[...e.slice(0,r),{...e[r],children:i},...e.slice(r+1)]}}return e};if(n===s||((e,t,n)=>{let s=(e,t)=>{for(let n of t){if(n.id===e)return n;if(n.children){let t=s(e,n.children);if(t)return t}}return null},r=e=>{if(e===t)return!0;let i=s(e,n);return null!=i&&!!i.children&&i.children.some(e=>r(e.id))};return r(e)})(n,s,i))return;let{component:d,newComps:c}=l(i,n);if(d){let n=o(c,s,d,r),{treeManager:i}=t(),l=new a(n,null==i?void 0:i.getExpandedState());e({components:n,treeManager:l}),t().saveToHistory()}}},undo:()=>{let{history:n,historyIndex:s}=t();if(s>0){let t=s-1,r=n[t],i=new a(r);e({components:r,treeManager:i,historyIndex:t,selectedComponentId:null})}},redo:()=>{let{history:n,historyIndex:s}=t();if(s<n.length-1){let t=s+1,r=n[t],i=new a(r);e({components:r,treeManager:i,historyIndex:t,selectedComponentId:null})}},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().history.length-1,saveToHistory:()=>{let{components:n,history:s,historyIndex:r}=t(),i=s[r];if(i&&JSON.stringify(i)===JSON.stringify(n))return;let a=s.slice(0,r+1);a.push([...n]),a.length>50?a.shift():e({historyIndex:r+1}),e({history:a})},setIsDragging:t=>e({isDragging:t}),setPreviewMode:t=>e({previewMode:t}),setCurrentDevice:t=>e({currentDevice:t}),getComponentById:e=>{let{components:n}=t(),s=t=>{for(let n of t){if(n.id===e)return n;if(n.children){let e=s(n.children);if(e)return e}}return null};return s(n)},getComponentChildren:e=>{let n=t().getComponentById(e);return(null==n?void 0:n.children)||[]},getComponentPath:e=>{let{components:n}=t(),s=[],r=(e,t,n)=>{for(let i of e){let e=[...n,i];if(i.id===t)return s.push(...e),!0;if(i.children&&r(i.children,t,e))return!0}return!1};return r(n,e,[]),s},generateUniqueId:()=>"comp_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),getTreeNodes:()=>{let{treeManager:e}=t();return e?e.getRootNodes():[]},getVisibleTreeNodes:()=>{let{treeManager:e}=t();return e?e.getVisibleNodes():[]},getRootComponents:()=>{let{treeManager:e}=t();if(e){let t=e=>({...e.component,children:e.children.map(t)});return e.getRootNodes().map(t)}{let{components:e}=t(),n=e.filter(e=>!e.parentId),s=t=>e.filter(e=>e.parentId===t).map(e=>({...e,children:s(e.id)}));return n.map(e=>({...e,children:s(e.id)}))}},toggleNodeExpanded:n=>{let{treeManager:s}=t();s&&(s.toggleExpanded(n),e({treeManager:new a(s.toComponentArray(),s.getExpandedState())}))},precompileStyles:()=>{let{components:n}=t(),s=e=>e.map(e=>{let t=(0,i.TU)(e.style),n={...e,className:t};return e.children&&e.children.length>0&&(n.children=s(e.children)),n}),r=s(n),l=new a(r);e({components:r,treeManager:l})}})))},2502:(e,t,n)=>{n.d(t,{sM:()=>p,Mj:()=>a,EA:()=>u,R1:()=>v,AB:()=>N,fm:()=>f,JV:()=>x});var s=n(5155),r=n(68),i=n(9142);function a(e){let{children:t,title:n="标题",maxHeight:a,className:l=""}=e,{currentDevice:o}=(0,r.U)(),d=(0,i.Pg)();return(0,s.jsx)("div",{className:"iphone-frame ".concat(l),children:(0,s.jsxs)("div",{className:"iphone-screen relative overflow-hidden",style:{width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),...a&&{maxHeight:a}},children:[o.hasNotch&&(0,s.jsx)("div",{className:"iphone-notch"}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between px-6 pt-2 text-black text-sm font-medium z-20 bg-white",style:{height:"".concat(o.safeAreaTop,"px")},children:[(0,s.jsx)("span",{children:d}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-black rounded-full"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-black rounded-full"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-black rounded-full"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-black rounded-full"})]}),(0,s.jsx)("svg",{className:"w-6 h-4 fill-black",viewBox:"0 0 24 16",children:(0,s.jsx)("path",{d:"M2 4h20v8H2V4zm18 6V6H4v4h16z"})}),(0,s.jsx)("div",{className:"w-6 h-3 border border-black rounded-sm",children:(0,s.jsx)("div",{className:"w-4 h-2 bg-black rounded-sm m-0.5"})})]})]}),(0,s.jsxs)("div",{className:"absolute left-0 right-0 h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-10",style:{top:"".concat(o.safeAreaTop,"px")},children:[(0,s.jsx)("h1",{className:"text-lg font-medium text-gray-900",children:n}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{className:"w-6 h-6 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"⋯"})}),(0,s.jsx)("button",{className:"w-6 h-6 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"✕"})})]})]}),(0,s.jsx)("div",{className:"absolute left-0 right-0 bg-white overflow-y-auto",style:{top:"".concat(o.safeAreaTop+48,"px"),bottom:"".concat(o.safeAreaBottom,"px"),height:"".concat(o.height-o.safeAreaTop-48-o.safeAreaBottom,"px")},children:t}),o.safeAreaBottom>0&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white flex items-center justify-center z-10",style:{height:"".concat(o.safeAreaBottom,"px")},children:(0,s.jsx)("div",{className:"w-32 h-1 bg-black rounded-full opacity-60"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-white -z-10",style:{borderRadius:"32px"}})]})})}var l=n(4582),o=n(9613),d=n(6474),c=n(5196),h=n(6767);function p(e){let{showIcon:t=!1,showTooltip:n=!1,className:i="inline-flex items-center justify-between px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[140px]"}=e,{currentDevice:a,setCurrentDevice:p}=(0,r.U)(),m=(0,s.jsxs)(l.bL,{value:a.id,onValueChange:e=>{let t=r.R.find(t=>t.id===e);t&&p(t)},children:[(0,s.jsxs)(l.l9,{className:i,children:[(0,s.jsx)(l.WT,{}),(0,s.jsx)(l.In,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{className:"bg-white rounded-md shadow-lg border border-gray-200 z-50",children:(0,s.jsx)(l.LM,{className:"p-1",children:r.R.map(e=>(0,s.jsxs)(l.q7,{value:e.id,className:"relative flex items-center px-3 py-2 text-sm rounded-sm cursor-pointer select-none hover:bg-gray-100 focus:bg-gray-100 focus:outline-none data-[highlighted]:bg-gray-100",children:[(0,s.jsx)(l.p4,{children:e.name}),(0,s.jsx)(l.VF,{className:"absolute right-2",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]},e.id))})})})]});return n?(0,s.jsxs)(o.bL,{children:[(0,s.jsx)(o.l9,{asChild:!0,children:m}),(0,s.jsx)(o.ZL,{children:(0,s.jsxs)(o.UC,{className:"bg-gray-900 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["选择手机机型",(0,s.jsx)(o.i3,{className:"fill-gray-900"})]})})]}):t?(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-gray-500"}),m]}):m}var m=n(3999);function u(e){let{className:t,variant:n="default",width:r,height:i,animate:a=!0,...l}=e,o=(0,m.cn)("bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%]",a&&"animate-pulse",{"rounded-md":"default"===n||"rectangular"===n,"rounded-full":"circular"===n,"rounded-sm h-4":"text"===n},t);return(0,s.jsx)("div",{className:o,style:{width:"number"==typeof r?"".concat(r,"px"):r,height:"number"==typeof i?"".concat(i,"px"):i},...l})}function g(e){let{size:t=40,className:n,...r}=e;return(0,s.jsx)(u,{variant:"circular",width:t,height:t,className:n,...r})}function x(e){let{className:t,...n}=e;return(0,s.jsxs)("div",{className:(0,m.cn)("bg-white rounded-xl p-6 shadow-sm border border-gray-100",t),...n,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u,{className:"h-4 w-20"}),(0,s.jsx)(u,{className:"h-8 w-16"})]}),(0,s.jsx)(u,{variant:"circular",width:48,height:48})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,s.jsx)(u,{variant:"circular",width:16,height:16}),(0,s.jsx)(u,{className:"h-3 w-24"})]})]})}function f(e){let{className:t,...n}=e;return(0,s.jsxs)("div",{className:(0,m.cn)("bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",t),...n,children:[(0,s.jsx)("div",{className:"aspect-[4/3] bg-gray-100",children:(0,s.jsx)(u,{className:"w-full h-full"})}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)(u,{className:"h-5 w-3/4"}),(0,s.jsx)(u,{className:"h-4 w-full"}),(0,s.jsx)(u,{className:"h-4 w-2/3"}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,s.jsx)(u,{className:"h-3 w-16"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u,{variant:"circular",width:24,height:24}),(0,s.jsx)(u,{variant:"circular",width:24,height:24}),(0,s.jsx)(u,{variant:"circular",width:24,height:24})]})]})]})]})}function v(e){let{className:t,...n}=e;return(0,s.jsxs)("div",{className:(0,m.cn)("flex items-start gap-3 p-3 rounded-lg",t),...n,children:[(0,s.jsx)(g,{size:32}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(u,{className:"h-4 w-3/4"}),(0,s.jsx)(u,{className:"h-3 w-1/2"})]})]})}function N(e){let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,m.cn)("space-y-3",t),...n,children:Array.from({length:5}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(u,{className:"h-4 w-16"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u,{className:"h-2 w-16 rounded-full"}),(0,s.jsx)(u,{className:"h-4 w-6"})]})]},t))})}n(2115)},9142:(e,t,n)=>{n.d(t,{Av:()=>r,Pg:()=>i});var s=n(2115);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{format:t="24",showSeconds:n=!1,updateInterval:r=1e3}=e,[i,a]=(0,s.useState)(""),[l,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{o(!0)},[]),(0,s.useEffect)(()=>{if(!l)return;let e=()=>{let e=new Date;if("12"===t)a(e.toLocaleTimeString("zh-CN",{hour12:!0,hour:"numeric",minute:"2-digit",second:n?"2-digit":void 0}));else{let t=e.getHours().toString().padStart(2,"0"),s=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");n?a("".concat(t,":").concat(s,":").concat(r)):a("".concat(t,":").concat(s))}};e();let s=setInterval(e,r);return()=>clearInterval(s)},[t,n,r,l]),l?i:"09:41"}function i(){return r({format:"24",showSeconds:!1})}}}]);